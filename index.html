<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title></title>
		<link rel="stylesheet" type="text/css" href="css/common.css" />
		<link rel="stylesheet" type="text/css" href="css/public.css" />
		<link rel="stylesheet" type="text/css" href="css/index.css" />
		<link rel="shortcut icon" href="#" />
		<script src="js/web-sesdk.js"></script>
		<script src="js/sesdk-parameters-plugin.js"></script>
		<script src='https://sdk.appadhoc.com/ab.plus.js'></script>
		<script>

			adhoc('init', {
			  appKey: 'ADHOC_318b02a7-d998-4ae5-bae7-3170b6c6636a', //创建应用时获得的appkey
			  crossDomain: 'w2073321.github.io', //跨页面统计设置主域名, 选填, 例如 'dev.com'
			  clientIdDomain: 'w2073321.github.io', // 指定设置clientid存储的主域名, 选填, 例如 'dev.com'
			  })		  
			</script>
<script>
	function applyFlags(flags) {
	  //applyFlags:callback函数名称
	  if (flags.get('Beastest') === 1) {
		//isNewHomePage:试验变量名称，和试验平台填写的名称保持一致；
		var text = "请填写试验版本要展示的文案！";
		console.log(text);
	  } else {
		var text = "请填写原始版本要展示的文案！";
		console.log(text);
	  }
  
	}
	adhoc('getFlags', applyFlags);
	adhoc('track', 'bannerclick', 1);
  </script>

	</head>
	<body>
		<!--
			页面的版心宽度  1251px
		-->
		<div id="box">
			<!--头部-->
			<div class="xf_header">
				<header>
					<a href="index.html">
						<img src="img/logo_big01.png" />
					</a>
					<div class="city">
						<img src="img/icon-address.png" />
						<span>武汉市</span>
						<a href="#">切换城市</a>
					</div>
					<div class="nav">
						<a href="#">全部</a>
						<a href="#">蛋糕</a>
						<a href="#">下午茶</a>
						<a href="#">手信</a>
						<a href="#">团购预约</a>
						<a href="#">关于我们</a>
					</div>
					<div class="link">
						<img src="img/i-search.jpg" />
						<img src="img/i-cart.jpg" />
						<img src="img/i-user.jpg" />
						<a href="#">联系我们</a>
					</div>
				</header>
			</div>
			<!--banner-->
			<div class="banner">
				<a>
					<img src=""  id="ABtest1" />
				</a>
			</div>
			<div class="cake_type">
				<div>
					<a>
						<img src="" id="ABtest2"/>
					</a>
					<a>
						<span>AFTERNOON TEA </span>
						<span>下午茶</span>
					</a>
					<p>“一杯咖啡，一份甜点，一抹偷不走的时光”</p>
				</div>
				<div>
					<a>
						<img src="img/cake_05.jpg" />
					</a>
					<a>
						<span>CAKE </span>
						<span>蛋糕</span>
					</a>
					<p>“只有国王才有资格拥有的，享受众人给予的祝福”</p>
				</div>
				<div>
					<a>
						<img src="img/cake_07.jpg" />
					</a>
					<a>
						<span>SOUVENIR </span>
						<span>手信</span>
					</a>
					<p>“不在于贵，一情意，一真诚”</p>
				</div>
			</div>
			<!--footer-->
			<div class="xf_footer">
				<footer>
					<div class="footer1">
						<div class="msg">
							<a href="#">品牌动态</a>
							<a href="#">生产经营资质</a>
							<a href="#">企业合作</a>
							<a href="#">发票申请</a>
							<a href="#">平台规则</a>
							<a href="#">帮助服务</a>
							<a href="#">联系我们</a>
						</div>
						<div class="tel">
							<a href="#">
								<img src="img/tel_03.jpg" />
								<span>400-999-6665</span>
							</a>
							<a href="#">WEIBO</a>
							<a href="#">WECHAT</a>
							<a href="#">京东商城</a>
						</div>
					</div>
					<div class="footer2">
						<div class="copyright">
							<span>深圳市幸福商城科技股份有限公司</span>
							<span>粤ICP备16039394号-6 </span>
							<span>京公网安备44030702002399</span>
							<span>公司地址：深圳市龙岗区坂田街道布龙339鸿生源工业园A座5楼</span>
						</div>
					</div>
				</footer>
			</div>
		</div>
	</body>
</html>
<script>
  // 加载参数下发SDK插件
  window.SESDK.use(window.parametersPlugin);
  // 初始化SDK
  SESDK.init({
    appKey: 'caea8a9b4a0021cc',
    userId: '5c5a2f0fd35d9296',	   
    config: {
      debugModel: false,
    //  customURL: 'https://w2073321.github.io/',
      autoTrackConfig: {
        autoTrack: true,
        autoTrackPageView: true,
        autoTrackPageClick: true,
        isTrackSinglePage: false,
      },
      remoteConfig: {
        pollingInterval: 30,
        enable: true,
        mergeType: 0,
        customIDProperties: { a: 1 },
        customIDEventProperties: { e: 1 },
        customIDUserProperties: { u: 1 },
		
      },
    },
  });

  //设置accountid
  let UUID =URL.createObjectURL(new Blob()).substr(-36);
//   function uuid() {
//     var s = [];
//     var hexDigits = "0123456789abcdef";
//     for (var i = 0; i < 36; i++) {
//         s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);
//     }
//     s[14] = "4";  // bits 12-15 of the time_hi_and_version field to 0010
//     s[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1);  // bits 6-7 of the clock_seq_hi_and_reserved to 01
//     s[8] = s[13] = s[18] = s[23] = "-";
 
//     var uuid = s.join("");
//     return uuid;
// }
  SESDK.login(UUID);
  var Acc = SESDK.getAccountId();
  console.log(UUID);
  //设置访客ID
  SESDK.setVisitorId('vid8709901241');
  var Visit =  SESDK.getVisitorId();
  console.log(Visit);
  setTimeout(function(){
    SESDK.logout();
  }, 3000);
   SESDK.logout();
  // defaultConfig 默认配置，一个参数配置为一个对象，格式如下：
  SESDK.setRemoteDefaultConfig([
      {
            name : "banner", // 配置项的名称，对应fastFetchRemoteConfig接口的参数 key
            typ : 2, // 配置项的类型 1 string、2 number、3 boolean、4 json
            value : "0", // 配置项的值
      },
	  {
            name : "drown", // 配置项的名称，对应fastFetchRemoteConfig接口的参数 key
            typ : 3, // 配置项的类型 1 string、2 number、3 boolean、4 json
            value : "true", // 配置项的值
      },
	  {
            name : "drown", // 配置项的名称，对应fastFetchRemoteConfig接口的参数 key
            typ : 3, // 配置项的类型 1 string、2 number、3 boolean、4 json
            value : "true", // 配置项的值
      }
  ]);

  //同步下发参数
 SESDK.ready(function(){
    const value = SESDK.fastFetchRemoteConfig("banner");
    console.log(value, typeof value);
    if (value === "1") {
    //isNewHomePage:试验变量名称，和试验平台填写的名称保持一致；
    document.getElementById('ABtest1').src="img/bg1.jpeg";
    //展示试验版本样式
    } else if (value === "0"){
    document.getElementById('ABtest1').src="img/bg.jpg";
    //展示原始版本样式
    };
});
     
   // 异步下发参数
	 
    SESDK.asyncFetchRemoteConfig("drown").then(function(a_value){
		console.log(a_value, typeof a_value);
		if (a_value=== "false") {
                		 //试验变量名称，和试验平台填写的名称保持一致；
                		 document.getElementById('ABtest2').src="img/cake4.jpg";
                		 //展示试验版本样式
        } else if (a_value=== "true"){
                		 document.getElementById('ABtest2').src="img/cake_03.jpg";
                		 //展示原始版本样式
                };
	}); 
    
				   

  //自定义指标上报
document.getElementById('ABtest1').addEventListener('click', function(e){
  SESDK.trackRegister({
    regType: 'WeChat',
    registerStatus: 'success',
    customProperties: {
      one: '1',
    }
  });
  SESDK.track('add_cart', {
    one: '1',
  }); 

  setTimeout(function(){
    location.href = 'https://w2073321.github.io/details.html';
  }, 1000);
}, false);
</script>