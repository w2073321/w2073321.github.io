/**
 * sesdk-webabtest-plugin.prod.js
 * version: 1.1.0
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).webabtestPlugin=e()}(this,(function(){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t,e){return t(e={exports:{}},e.exports),e.exports}var n=function(t){return t&&t.Math==Math&&t},r=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||function(){return this}()||Function("return this")(),o=function(t){try{return!!t()}catch(t){return!0}},i=!o((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),u={}.propertyIsEnumerable,a=Object.getOwnPropertyDescriptor,c={f:a&&!u.call({1:2},1)?function(t){var e=a(this,t);return!!e&&e.enumerable}:u},s=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},f={}.toString,l=function(t){return f.call(t).slice(8,-1)},p="".split,d=o((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==l(t)?p.call(t,""):Object(t)}:Object,v=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},m=function(t){return d(v(t))},g=function(t){return"object"==typeof t?null!==t:"function"==typeof t},y=function(t,e){if(!g(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!g(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!g(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!g(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},h={}.hasOwnProperty,b=function(t,e){return h.call(t,e)},_=r.document,S=g(_)&&g(_.createElement),T=function(t){return S?_.createElement(t):{}},E=!i&&!o((function(){return 7!=Object.defineProperty(T("div"),"a",{get:function(){return 7}}).a})),j=Object.getOwnPropertyDescriptor,P={f:i?j:function(t,e){if(t=m(t),e=y(e,!0),E)try{return j(t,e)}catch(t){}if(b(t,e))return s(!c.f.call(t,e),t[e])}},O=function(t){if(!g(t))throw TypeError(String(t)+" is not an object");return t},w=Object.defineProperty,I={f:i?w:function(t,e,n){if(O(t),e=y(e,!0),O(n),E)try{return w(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},k=i?function(t,e,n){return I.f(t,e,s(1,n))}:function(t,e,n){return t[e]=n,t},C=function(t,e){try{k(r,t,e)}catch(n){r[t]=e}return e},D="__core-js_shared__",x=r[D]||C(D,{}),A=Function.toString;"function"!=typeof x.inspectSource&&(x.inspectSource=function(t){return A.call(t)});var R,M,L,N=x.inspectSource,q=r.WeakMap,F="function"==typeof q&&/native code/.test(N(q)),V=e((function(t){(t.exports=function(t,e){return x[t]||(x[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.8.0",mode:"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})})),z=0,U=Math.random(),G=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++z+U).toString(36)},H=V("keys"),K=function(t){return H[t]||(H[t]=G(t))},B={},W=r.WeakMap;if(F){var Q=x.state||(x.state=new W),Y=Q.get,$=Q.has,J=Q.set;R=function(t,e){return e.facade=t,J.call(Q,t,e),e},M=function(t){return Y.call(Q,t)||{}},L=function(t){return $.call(Q,t)}}else{var X=K("state");B[X]=!0,R=function(t,e){return e.facade=t,k(t,X,e),e},M=function(t){return b(t,X)?t[X]:{}},L=function(t){return b(t,X)}}var Z,tt,et={set:R,get:M,has:L,enforce:function(t){return L(t)?M(t):R(t,{})},getterFor:function(t){return function(e){var n;if(!g(e)||(n=M(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},nt=e((function(t){var e=et.get,n=et.enforce,o=String(String).split("String");(t.exports=function(t,e,i,u){var a,c=!!u&&!!u.unsafe,s=!!u&&!!u.enumerable,f=!!u&&!!u.noTargetGet;"function"==typeof i&&("string"!=typeof e||b(i,"name")||k(i,"name",e),(a=n(i)).source||(a.source=o.join("string"==typeof e?e:""))),t!==r?(c?!f&&t[e]&&(s=!0):delete t[e],s?t[e]=i:k(t,e,i)):s?t[e]=i:C(e,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||N(this)}))})),rt=r,ot=function(t){return"function"==typeof t?t:void 0},it=function(t,e){return arguments.length<2?ot(rt[t])||ot(r[t]):rt[t]&&rt[t][e]||r[t]&&r[t][e]},ut=Math.ceil,at=Math.floor,ct=function(t){return isNaN(t=+t)?0:(t>0?at:ut)(t)},st=Math.min,ft=function(t){return t>0?st(ct(t),9007199254740991):0},lt=Math.max,pt=Math.min,dt=function(t,e){var n=ct(t);return n<0?lt(n+e,0):pt(n,e)},vt=function(t){return function(e,n,r){var o,i=m(e),u=ft(i.length),a=dt(r,u);if(t&&n!=n){for(;u>a;)if((o=i[a++])!=o)return!0}else for(;u>a;a++)if((t||a in i)&&i[a]===n)return t||a||0;return!t&&-1}},mt={includes:vt(!0),indexOf:vt(!1)}.indexOf,gt=function(t,e){var n,r=m(t),o=0,i=[];for(n in r)!b(B,n)&&b(r,n)&&i.push(n);for(;e.length>o;)b(r,n=e[o++])&&(~mt(i,n)||i.push(n));return i},yt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],ht=yt.concat("length","prototype"),bt={f:Object.getOwnPropertyNames||function(t){return gt(t,ht)}},_t={f:Object.getOwnPropertySymbols},St=it("Reflect","ownKeys")||function(t){var e=bt.f(O(t)),n=_t.f;return n?e.concat(n(t)):e},Tt=function(t,e){for(var n=St(e),r=I.f,o=P.f,i=0;i<n.length;i++){var u=n[i];b(t,u)||r(t,u,o(e,u))}},Et=/#|\.prototype\./,jt=function(t,e){var n=Ot[Pt(t)];return n==It||n!=wt&&("function"==typeof e?o(e):!!e)},Pt=jt.normalize=function(t){return String(t).replace(Et,".").toLowerCase()},Ot=jt.data={},wt=jt.NATIVE="N",It=jt.POLYFILL="P",kt=jt,Ct=P.f,Dt=function(t,e){var n,o,i,u,a,c=t.target,s=t.global,f=t.stat;if(n=s?r:f?r[c]||C(c,{}):(r[c]||{}).prototype)for(o in e){if(u=e[o],i=t.noTargetGet?(a=Ct(n,o))&&a.value:n[o],!kt(s?o:c+(f?".":"#")+o,t.forced)&&void 0!==i){if(typeof u==typeof i)continue;Tt(u,i)}(t.sham||i&&i.sham)&&k(u,"sham",!0),nt(n,o,u,t)}},xt=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},At=function(t,e,n){if(xt(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}},Rt=function(t){return Object(v(t))},Mt=Array.isArray||function(t){return"Array"==l(t)},Lt=!!Object.getOwnPropertySymbols&&!o((function(){return!String(Symbol())})),Nt=Lt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,qt=V("wks"),Ft=r.Symbol,Vt=Nt?Ft:Ft&&Ft.withoutSetter||G,zt=function(t){return b(qt,t)||(Lt&&b(Ft,t)?qt[t]=Ft[t]:qt[t]=Vt("Symbol."+t)),qt[t]},Ut=zt("species"),Gt=function(t,e){var n;return Mt(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!Mt(n.prototype)?g(n)&&null===(n=n[Ut])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)},Ht=[].push,Kt=function(t){var e=1==t,n=2==t,r=3==t,o=4==t,i=6==t,u=7==t,a=5==t||i;return function(c,s,f,l){for(var p,v,m=Rt(c),g=d(m),y=At(s,f,3),h=ft(g.length),b=0,_=l||Gt,S=e?_(c,h):n||u?_(c,0):void 0;h>b;b++)if((a||b in g)&&(v=y(p=g[b],b,m),t))if(e)S[b]=v;else if(v)switch(t){case 3:return!0;case 5:return p;case 6:return b;case 2:Ht.call(S,p)}else switch(t){case 4:return!1;case 7:Ht.call(S,p)}return i?-1:r||o?o:S}},Bt={forEach:Kt(0),map:Kt(1),filter:Kt(2),some:Kt(3),every:Kt(4),find:Kt(5),findIndex:Kt(6),filterOut:Kt(7)},Wt=it("navigator","userAgent")||"",Qt=r.process,Yt=Qt&&Qt.versions,$t=Yt&&Yt.v8;$t?tt=(Z=$t.split("."))[0]+Z[1]:Wt&&(!(Z=Wt.match(/Edge\/(\d+)/))||Z[1]>=74)&&(Z=Wt.match(/Chrome\/(\d+)/))&&(tt=Z[1]);var Jt=tt&&+tt,Xt=zt("species"),Zt=function(t){return Jt>=51||!o((function(){var e=[];return(e.constructor={})[Xt]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},te=Object.defineProperty,ee={},ne=function(t){throw t},re=function(t,e){if(b(ee,t))return ee[t];e||(e={});var n=[][t],r=!!b(e,"ACCESSORS")&&e.ACCESSORS,u=b(e,0)?e[0]:ne,a=b(e,1)?e[1]:void 0;return ee[t]=!!n&&!o((function(){if(r&&!i)return!0;var t={length:-1};r?te(t,1,{enumerable:!0,get:ne}):t[1]=1,n.call(t,u,a)}))},oe=Bt.filter,ie=Zt("filter"),ue=re("filter");Dt({target:"Array",proto:!0,forced:!ie||!ue},{filter:function(t){return oe(this,t,arguments.length>1?arguments[1]:void 0)}});var ae=Bt.map,ce=Zt("map"),se=re("map");Dt({target:"Array",proto:!0,forced:!ce||!se},{map:function(t){return ae(this,t,arguments.length>1?arguments[1]:void 0)}});var fe={};fe[zt("toStringTag")]="z";var le="[object z]"===String(fe),pe=zt("toStringTag"),de="Arguments"==l(function(){return arguments}()),ve=le?l:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),pe))?n:de?l(e):"Object"==(r=l(e))&&"function"==typeof e.callee?"Arguments":r},me=le?{}.toString:function(){return"[object "+ve(this)+"]"};le||nt(Object.prototype,"toString",me,{unsafe:!0});var ge=r.Promise,ye=function(t,e,n){for(var r in e)nt(t,r,e[r],n);return t},he=I.f,be=zt("toStringTag"),_e=function(t,e,n){t&&!b(t=n?t:t.prototype,be)&&he(t,be,{configurable:!0,value:e})},Se=zt("species"),Te=function(t){var e=it(t),n=I.f;i&&e&&!e[Se]&&n(e,Se,{configurable:!0,get:function(){return this}})},Ee=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t},je={},Pe=zt("iterator"),Oe=Array.prototype,we=function(t){return void 0!==t&&(je.Array===t||Oe[Pe]===t)},Ie=zt("iterator"),ke=function(t){if(null!=t)return t[Ie]||t["@@iterator"]||je[ve(t)]},Ce=function(t){var e=t.return;if(void 0!==e)return O(e.call(t)).value},De=function(t,e){this.stopped=t,this.result=e},xe=function(t,e,n){var r,o,i,u,a,c,s,f=n&&n.that,l=!(!n||!n.AS_ENTRIES),p=!(!n||!n.IS_ITERATOR),d=!(!n||!n.INTERRUPTED),v=At(e,f,1+l+d),m=function(t){return r&&Ce(r),new De(!0,t)},g=function(t){return l?(O(t),d?v(t[0],t[1],m):v(t[0],t[1])):d?v(t,m):v(t)};if(p)r=t;else{if("function"!=typeof(o=ke(t)))throw TypeError("Target is not iterable");if(we(o)){for(i=0,u=ft(t.length);u>i;i++)if((a=g(t[i]))&&a instanceof De)return a;return new De(!1)}r=o.call(t)}for(c=r.next;!(s=c.call(r)).done;){try{a=g(s.value)}catch(t){throw Ce(r),t}if("object"==typeof a&&a&&a instanceof De)return a}return new De(!1)},Ae=zt("iterator"),Re=!1;try{var Me=0,Le={next:function(){return{done:!!Me++}},return:function(){Re=!0}};Le[Ae]=function(){return this},Array.from(Le,(function(){throw 2}))}catch(t){}var Ne,qe,Fe,Ve=function(t,e){if(!e&&!Re)return!1;var n=!1;try{var r={};r[Ae]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n},ze=zt("species"),Ue=it("document","documentElement"),Ge=/(iphone|ipod|ipad).*applewebkit/i.test(Wt),He="process"==l(r.process),Ke=r.location,Be=r.setImmediate,We=r.clearImmediate,Qe=r.process,Ye=r.MessageChannel,$e=r.Dispatch,Je=0,Xe={},Ze="onreadystatechange",tn=function(t){if(Xe.hasOwnProperty(t)){var e=Xe[t];delete Xe[t],e()}},en=function(t){return function(){tn(t)}},nn=function(t){tn(t.data)},rn=function(t){r.postMessage(t+"",Ke.protocol+"//"+Ke.host)};Be&&We||(Be=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return Xe[++Je]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},Ne(Je),Je},We=function(t){delete Xe[t]},He?Ne=function(t){Qe.nextTick(en(t))}:$e&&$e.now?Ne=function(t){$e.now(en(t))}:Ye&&!Ge?(Fe=(qe=new Ye).port2,qe.port1.onmessage=nn,Ne=At(Fe.postMessage,Fe,1)):r.addEventListener&&"function"==typeof postMessage&&!r.importScripts&&Ke&&"file:"!==Ke.protocol&&!o(rn)?(Ne=rn,r.addEventListener("message",nn,!1)):Ne=Ze in T("script")?function(t){Ue.appendChild(T("script")).onreadystatechange=function(){Ue.removeChild(this),tn(t)}}:function(t){setTimeout(en(t),0)});var on,un,an,cn,sn,fn,ln,pn,dn={set:Be,clear:We},vn=P.f,mn=dn.set,gn=r.MutationObserver||r.WebKitMutationObserver,yn=r.document,hn=r.process,bn=r.Promise,_n=vn(r,"queueMicrotask"),Sn=_n&&_n.value;Sn||(on=function(){var t,e;for(He&&(t=hn.domain)&&t.exit();un;){e=un.fn,un=un.next;try{e()}catch(t){throw un?cn():an=void 0,t}}an=void 0,t&&t.enter()},!Ge&&!He&&gn&&yn?(sn=!0,fn=yn.createTextNode(""),new gn(on).observe(fn,{characterData:!0}),cn=function(){fn.data=sn=!sn}):bn&&bn.resolve?(ln=bn.resolve(void 0),pn=ln.then,cn=function(){pn.call(ln,on)}):cn=He?function(){hn.nextTick(on)}:function(){mn.call(r,on)});var Tn,En,jn,Pn,On=Sn||function(t){var e={fn:t,next:void 0};an&&(an.next=e),un||(un=e,cn()),an=e},wn=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=xt(e),this.reject=xt(n)},In={f:function(t){return new wn(t)}},kn=function(t,e){if(O(t),g(e)&&e.constructor===t)return e;var n=In.f(t);return(0,n.resolve)(e),n.promise},Cn=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},Dn=dn.set,xn=zt("species"),An="Promise",Rn=et.get,Mn=et.set,Ln=et.getterFor(An),Nn=ge,qn=r.TypeError,Fn=r.document,Vn=r.process,zn=it("fetch"),Un=In.f,Gn=Un,Hn=!!(Fn&&Fn.createEvent&&r.dispatchEvent),Kn="function"==typeof PromiseRejectionEvent,Bn="unhandledrejection",Wn=kt(An,(function(){if(!(N(Nn)!==String(Nn))){if(66===Jt)return!0;if(!He&&!Kn)return!0}if(Jt>=51&&/native code/.test(Nn))return!1;var t=Nn.resolve(1),e=function(t){t((function(){}),(function(){}))};return(t.constructor={})[xn]=e,!(t.then((function(){}))instanceof e)})),Qn=Wn||!Ve((function(t){Nn.all(t).catch((function(){}))})),Yn=function(t){var e;return!(!g(t)||"function"!=typeof(e=t.then))&&e},$n=function(t,e){if(!t.notified){t.notified=!0;var n=t.reactions;On((function(){for(var r=t.value,o=1==t.state,i=0;n.length>i;){var u,a,c,s=n[i++],f=o?s.ok:s.fail,l=s.resolve,p=s.reject,d=s.domain;try{f?(o||(2===t.rejection&&tr(t),t.rejection=1),!0===f?u=r:(d&&d.enter(),u=f(r),d&&(d.exit(),c=!0)),u===s.promise?p(qn("Promise-chain cycle")):(a=Yn(u))?a.call(u,l,p):l(u)):p(r)}catch(t){d&&!c&&d.exit(),p(t)}}t.reactions=[],t.notified=!1,e&&!t.rejection&&Xn(t)}))}},Jn=function(t,e,n){var o,i;Hn?((o=Fn.createEvent("Event")).promise=e,o.reason=n,o.initEvent(t,!1,!0),r.dispatchEvent(o)):o={promise:e,reason:n},!Kn&&(i=r["on"+t])?i(o):t===Bn&&function(t,e){var n=r.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)},Xn=function(t){Dn.call(r,(function(){var e,n=t.facade,r=t.value;if(Zn(t)&&(e=Cn((function(){He?Vn.emit("unhandledRejection",r,n):Jn(Bn,n,r)})),t.rejection=He||Zn(t)?2:1,e.error))throw e.value}))},Zn=function(t){return 1!==t.rejection&&!t.parent},tr=function(t){Dn.call(r,(function(){var e=t.facade;He?Vn.emit("rejectionHandled",e):Jn("rejectionhandled",e,t.value)}))},er=function(t,e,n){return function(r){t(e,r,n)}},nr=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,$n(t,!0))},rr=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw qn("Promise can't be resolved itself");var r=Yn(e);r?On((function(){var n={done:!1};try{r.call(e,er(rr,n,t),er(nr,n,t))}catch(e){nr(n,e,t)}})):(t.value=e,t.state=1,$n(t,!1))}catch(e){nr({done:!1},e,t)}}};function or(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ir(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ur(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ir(Object(n),!0).forEach((function(e){or(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ir(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}Wn&&(Nn=function(t){Ee(this,Nn,An),xt(t),Tn.call(this);var e=Rn(this);try{t(er(rr,e),er(nr,e))}catch(t){nr(e,t)}},(Tn=function(t){Mn(this,{type:An,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=ye(Nn.prototype,{then:function(t,e){var n,r,o,i=Ln(this),u=Un((n=Nn,void 0===(o=O(this).constructor)||null==(r=O(o)[ze])?n:xt(r)));return u.ok="function"!=typeof t||t,u.fail="function"==typeof e&&e,u.domain=He?Vn.domain:void 0,i.parent=!0,i.reactions.push(u),0!=i.state&&$n(i,!1),u.promise},catch:function(t){return this.then(void 0,t)}}),En=function(){var t=new Tn,e=Rn(t);this.promise=t,this.resolve=er(rr,e),this.reject=er(nr,e)},In.f=Un=function(t){return t===Nn||t===jn?new En(t):Gn(t)},"function"==typeof ge&&(Pn=ge.prototype.then,nt(ge.prototype,"then",(function(t,e){var n=this;return new Nn((function(t,e){Pn.call(n,t,e)})).then(t,e)}),{unsafe:!0}),"function"==typeof zn&&Dt({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return kn(Nn,zn.apply(r,arguments))}}))),Dt({global:!0,wrap:!0,forced:Wn},{Promise:Nn}),_e(Nn,An,!1),Te(An),jn=it(An),Dt({target:An,stat:!0,forced:Wn},{reject:function(t){var e=Un(this);return e.reject.call(void 0,t),e.promise}}),Dt({target:An,stat:!0,forced:Wn},{resolve:function(t){return kn(this,t)}}),Dt({target:An,stat:!0,forced:Qn},{all:function(t){var e=this,n=Un(e),r=n.resolve,o=n.reject,i=Cn((function(){var n=xt(e.resolve),i=[],u=0,a=1;xe(t,(function(t){var c=u++,s=!1;i.push(void 0),a++,n.call(e,t).then((function(t){s||(s=!0,i[c]=t,--a||r(i))}),o)})),--a||r(i)}));return i.error&&o(i.value),n.promise},race:function(t){var e=this,n=Un(e),r=n.reject,o=Cn((function(){var o=xt(e.resolve);xe(t,(function(t){o.call(e,t).then(n.resolve,r)}))}));return o.error&&r(o.value),n.promise}});var ar=function(t,e,n){var r=y(e);r in t?I.f(t,r,s(0,n)):t[r]=n},cr=zt("isConcatSpreadable"),sr=9007199254740991,fr="Maximum allowed index exceeded",lr=Jt>=51||!o((function(){var t=[];return t[cr]=!1,t.concat()[0]!==t})),pr=Zt("concat"),dr=function(t){if(!g(t))return!1;var e=t[cr];return void 0!==e?!!e:Mt(t)};Dt({target:"Array",proto:!0,forced:!lr||!pr},{concat:function(t){var e,n,r,o,i,u=Rt(this),a=Gt(u,0),c=0;for(e=-1,r=arguments.length;e<r;e++)if(dr(i=-1===e?u:arguments[e])){if(c+(o=ft(i.length))>sr)throw TypeError(fr);for(n=0;n<o;n++,c++)n in i&&ar(a,c,i[n])}else{if(c>=sr)throw TypeError(fr);ar(a,c++,i)}return a.length=c,a}});var vr,mr=Object.keys||function(t){return gt(t,yt)},gr=i?Object.defineProperties:function(t,e){O(t);for(var n,r=mr(e),o=r.length,i=0;o>i;)I.f(t,n=r[i++],e[n]);return t},yr=K("IE_PROTO"),hr=function(){},br=function(t){return"<script>"+t+"</"+"script>"},_r=function(){try{vr=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;_r=vr?function(t){t.write(br("")),t.close();var e=t.parentWindow.Object;return t=null,e}(vr):((e=T("iframe")).style.display="none",Ue.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(br("document.F=Object")),t.close(),t.F);for(var n=yt.length;n--;)delete _r.prototype[yt[n]];return _r()};B[yr]=!0;var Sr=Object.create||function(t,e){var n;return null!==t?(hr.prototype=O(t),n=new hr,hr.prototype=null,n[yr]=t):n=_r(),void 0===e?n:gr(n,e)},Tr=zt("unscopables"),Er=Array.prototype;null==Er[Tr]&&I.f(Er,Tr,{configurable:!0,value:Sr(null)});var jr=function(t){Er[Tr][t]=!0},Pr=Bt.findIndex,Or="findIndex",wr=!0,Ir=re(Or);Or in[]&&Array(1).findIndex((function(){wr=!1})),Dt({target:"Array",proto:!0,forced:wr||!Ir},{findIndex:function(t){return Pr(this,t,arguments.length>1?arguments[1]:void 0)}}),jr(Or);var kr=Bt.forEach,Cr=function(t,e){var n=[][t];return!!n&&o((function(){n.call(null,e||function(){throw 1},1)}))}("forEach"),Dr=re("forEach"),xr=Cr&&Dr?[].forEach:function(t){return kr(this,t,arguments.length>1?arguments[1]:void 0)};Dt({target:"Array",proto:!0,forced:[].forEach!=xr},{forEach:xr});var Ar=function(t,e,n,r){try{return r?e(O(n)[0],n[1]):e(n)}catch(e){throw Ce(t),e}},Rr=!Ve((function(t){Array.from(t)}));Dt({target:"Array",stat:!0,forced:Rr},{from:function(t){var e,n,r,o,i,u,a=Rt(t),c="function"==typeof this?this:Array,s=arguments.length,f=s>1?arguments[1]:void 0,l=void 0!==f,p=ke(a),d=0;if(l&&(f=At(f,s>2?arguments[2]:void 0,2)),null==p||c==Array&&we(p))for(n=new c(e=ft(a.length));e>d;d++)u=l?f(a[d],d):a[d],ar(n,d,u);else for(i=(o=p.call(a)).next,n=new c;!(r=i.call(o)).done;d++)u=l?Ar(o,f,[r.value,d],!0):r.value,ar(n,d,u);return n.length=d,n}});var Mr,Lr,Nr,qr=!o((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),Fr=K("IE_PROTO"),Vr=Object.prototype,zr=qr?Object.getPrototypeOf:function(t){return t=Rt(t),b(t,Fr)?t[Fr]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Vr:null},Ur=zt("iterator"),Gr=!1;[].keys&&("next"in(Nr=[].keys())?(Lr=zr(zr(Nr)))!==Object.prototype&&(Mr=Lr):Gr=!0),null==Mr&&(Mr={}),b(Mr,Ur)||k(Mr,Ur,(function(){return this}));var Hr={IteratorPrototype:Mr,BUGGY_SAFARI_ITERATORS:Gr},Kr=Hr.IteratorPrototype,Br=function(){return this},Wr=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return O(n),function(t){if(!g(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(r),e?t.call(n,r):n.__proto__=r,n}}():void 0),Qr=Hr.IteratorPrototype,Yr=Hr.BUGGY_SAFARI_ITERATORS,$r=zt("iterator"),Jr="keys",Xr="values",Zr="entries",to=function(){return this},eo=function(t,e,n,r,o,i,u){!function(t,e,n){var r=e+" Iterator";t.prototype=Sr(Kr,{next:s(1,n)}),_e(t,r,!1),je[r]=Br}(n,e,r);var a,c,f,l=function(t){if(t===o&&g)return g;if(!Yr&&t in v)return v[t];switch(t){case Jr:case Xr:case Zr:return function(){return new n(this,t)}}return function(){return new n(this)}},p=e+" Iterator",d=!1,v=t.prototype,m=v[$r]||v["@@iterator"]||o&&v[o],g=!Yr&&m||l(o),y="Array"==e&&v.entries||m;if(y&&(a=zr(y.call(new t)),Qr!==Object.prototype&&a.next&&(zr(a)!==Qr&&(Wr?Wr(a,Qr):"function"!=typeof a[$r]&&k(a,$r,to)),_e(a,p,!0))),o==Xr&&m&&m.name!==Xr&&(d=!0,g=function(){return m.call(this)}),v[$r]!==g&&k(v,$r,g),je[e]=g,o)if(c={values:l(Xr),keys:i?g:l(Jr),entries:l(Zr)},u)for(f in c)(Yr||d||!(f in v))&&nt(v,f,c[f]);else Dt({target:e,proto:!0,forced:Yr||d},c);return c},no="Array Iterator",ro=et.set,oo=et.getterFor(no),io=eo(Array,"Array",(function(t,e){ro(this,{type:no,target:m(t),index:0,kind:e})}),(function(){var t=oo(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");je.Arguments=je.Array,jr("keys"),jr("values"),jr("entries");var uo=Zt("slice"),ao=re("slice",{ACCESSORS:!0,0:0,1:2}),co=zt("species"),so=[].slice,fo=Math.max;Dt({target:"Array",proto:!0,forced:!uo||!ao},{slice:function(t,e){var n,r,o,i=m(this),u=ft(i.length),a=dt(t,u),c=dt(void 0===e?u:e,u);if(Mt(i)&&("function"!=typeof(n=i.constructor)||n!==Array&&!Mt(n.prototype)?g(n)&&null===(n=n[co])&&(n=void 0):n=void 0,n===Array||void 0===n))return so.call(i,a,c);for(r=new(void 0===n?Array:n)(fo(c-a,0)),o=0;a<c;a++,o++)a in i&&ar(r,o,i[a]);return r.length=o,r}});var lo=I.f,po=Function.prototype,vo=po.toString,mo=/^\s*function ([^ (]*)/,go="name";i&&!(go in po)&&lo(po,go,{configurable:!0,get:function(){try{return vo.call(this).match(mo)[1]}catch(t){return""}}});var yo=!o((function(){return Object.isExtensible(Object.preventExtensions({}))})),ho=e((function(t){var e=I.f,n=G("meta"),r=0,o=Object.isExtensible||function(){return!0},i=function(t){e(t,n,{value:{objectID:"O"+ ++r,weakData:{}}})},u=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!g(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!b(t,n)){if(!o(t))return"F";if(!e)return"E";i(t)}return t[n].objectID},getWeakData:function(t,e){if(!b(t,n)){if(!o(t))return!0;if(!e)return!1;i(t)}return t[n].weakData},onFreeze:function(t){return yo&&u.REQUIRED&&o(t)&&!b(t,n)&&i(t),t}};B[n]=!0})),bo=(ho.REQUIRED,ho.fastKey,ho.getWeakData,ho.onFreeze,I.f),_o=ho.fastKey,So=et.set,To=et.getterFor,Eo=(function(t,e,n){var i=-1!==t.indexOf("Map"),u=-1!==t.indexOf("Weak"),a=i?"set":"add",c=r[t],s=c&&c.prototype,f=c,l={},p=function(t){var e=s[t];nt(s,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(u&&!g(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return u&&!g(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(u&&!g(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})};if(kt(t,"function"!=typeof c||!(u||s.forEach&&!o((function(){(new c).entries().next()})))))f=n.getConstructor(e,t,i,a),ho.REQUIRED=!0;else if(kt(t,!0)){var d=new f,v=d[a](u?{}:-0,1)!=d,m=o((function(){d.has(1)})),y=Ve((function(t){new c(t)})),h=!u&&o((function(){for(var t=new c,e=5;e--;)t[a](e,e);return!t.has(-0)}));y||((f=e((function(e,n){Ee(e,f,t);var r=function(t,e,n){var r,o;return Wr&&"function"==typeof(r=e.constructor)&&r!==n&&g(o=r.prototype)&&o!==n.prototype&&Wr(t,o),t}(new c,e,f);return null!=n&&xe(n,r[a],{that:r,AS_ENTRIES:i}),r}))).prototype=s,s.constructor=f),(m||h)&&(p("delete"),p("has"),i&&p("get")),(h||v)&&p(a),u&&s.clear&&delete s.clear}l[t]=f,Dt({global:!0,forced:f!=c},l),_e(f,t),u||n.setStrong(f,t,i)}("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),{getConstructor:function(t,e,n,r){var o=t((function(t,u){Ee(t,o,e),So(t,{type:e,index:Sr(null),first:void 0,last:void 0,size:0}),i||(t.size=0),null!=u&&xe(u,t[r],{that:t,AS_ENTRIES:n})})),u=To(e),a=function(t,e,n){var r,o,a=u(t),s=c(t,e);return s?s.value=n:(a.last=s={index:o=_o(e,!0),key:e,value:n,previous:r=a.last,next:void 0,removed:!1},a.first||(a.first=s),r&&(r.next=s),i?a.size++:t.size++,"F"!==o&&(a.index[o]=s)),t},c=function(t,e){var n,r=u(t),o=_o(e);if("F"!==o)return r.index[o];for(n=r.first;n;n=n.next)if(n.key==e)return n};return ye(o.prototype,{clear:function(){for(var t=u(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,i?t.size=0:this.size=0},delete:function(t){var e=this,n=u(e),r=c(e,t);if(r){var o=r.next,a=r.previous;delete n.index[r.index],r.removed=!0,a&&(a.next=o),o&&(o.previous=a),n.first==r&&(n.first=o),n.last==r&&(n.last=a),i?n.size--:e.size--}return!!r},forEach:function(t){for(var e,n=u(this),r=At(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.next:n.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!c(this,t)}}),ye(o.prototype,n?{get:function(t){var e=c(this,t);return e&&e.value},set:function(t,e){return a(this,0===t?0:t,e)}}:{add:function(t){return a(this,t=0===t?0:t,t)}}),i&&bo(o.prototype,"size",{get:function(){return u(this).size}}),o},setStrong:function(t,e,n){var r=e+" Iterator",o=To(e),i=To(r);eo(t,e,(function(t,e){So(this,{type:r,target:t,state:o(t),kind:e,last:void 0})}),(function(){for(var t=i(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),Te(e)}}),function(t){return function(e,n){var r,o,i=String(v(e)),u=ct(n),a=i.length;return u<0||u>=a?t?"":void 0:(r=i.charCodeAt(u))<55296||r>56319||u+1===a||(o=i.charCodeAt(u+1))<56320||o>57343?t?i.charAt(u):r:t?i.slice(u,u+2):o-56320+(r-55296<<10)+65536}}),jo={codeAt:Eo(!1),charAt:Eo(!0)}.charAt,Po="String Iterator",Oo=et.set,wo=et.getterFor(Po);eo(String,"String",(function(t){Oo(this,{type:Po,string:String(t),index:0})}),(function(){var t,e=wo(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=jo(n,r),e.index+=t.length,{value:t,done:!1})}));var Io={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},ko=zt("iterator"),Co=zt("toStringTag"),Do=io.values;for(var xo in Io){var Ao=r[xo],Ro=Ao&&Ao.prototype;if(Ro){if(Ro[ko]!==Do)try{k(Ro,ko,Do)}catch(t){Ro[ko]=Do}if(Ro[Co]||k(Ro,Co,xo),Io[xo])for(var Mo in io)if(Ro[Mo]!==io[Mo])try{k(Ro,Mo,io[Mo])}catch(t){Ro[Mo]=io[Mo]}}}function Lo(t,e,n){t.setStateData(or({},"reportData.properties.".concat(e),n))}var No=["customIDProperties","customIDEventProperties","customIDUserProperties"];function qo(t,e){var n={};return No.forEach((function(r){t.isObject(e[r])&&(n[r]=t.filterCustomProperties(e[r]))})),n}function Fo(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!Array.isArray(t))return[];var n=t.filter((function(t){return t.from===e})).map((function(t){return t.entity_id}));return Array.from(new Set(n))}function Vo(t,e){return t.isValueExceedLimit(t.valueToStr(e))?(e.shift(),Vo(t.config)):e}function zo(t,e,n,r,o){t.Storage.setItem(e,n.slice(r[o]),(function(){o<r.length-1?zo(t,e,n,r,o+1):t.Storage.deleteItem(storageKey.combinationId)}))}function Uo(t,e,n,r){if(!Array.isArray(n))return[];var o=Vo(t,n.slice(0));zo(t,e,o,function(t,e){var n=t-e,r=[],o=Math.ceil(n/10);if(n>0)for(var i=n;i>0;i-=o)r.unshift(i);return r.unshift(0),r}(o.length,r),0)}function Go(t,e){var n,r,o,i,u,a,c,s=t.filter((function(t){return t.name===e}));return s.length?{value:null===(n=s[0])||void 0===n?void 0:n.value,groupId:null===(r=s[0])||void 0===r?void 0:r.group_id,status:null===(o=s[0])||void 0===o?void 0:o.status,from:null===(i=s[0])||void 0===i?void 0:i.from,entityId:null===(u=s[0])||void 0===u?void 0:u.entity_id,subjectName:null===(a=s[0])||void 0===a?void 0:a.subject_name,subjectValue:null===(c=s[0])||void 0===c?void 0:c.subject_value}:null}function Ho(t,e){var n=t.getStateData("reportData");if(n._appkey&&e.subjectName&&e.subjectValue&&e.entityId&&e.groupId){var r="".concat(n._appkey,"_").concat(e.subjectName,"_").concat(e.subjectValue,"_").concat(e.entityId,"_").concat(e.groupId);if(t.Storage.getItem(r))return!0;t.Storage.setItem(r,1)}return!1}function Ko(t,e){var n=t.Storage.getItem(e,!0,[]);Lo(t,e,(null==n?void 0:n.length)?n:null)}function Bo(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=Fo(e,r);Lo(t,n,o),t.Storage.setItem(n,o)}function Wo(t,e,n){t.t3=+new Date,t.param_value=e&&void 0!==e.value?e.value:null;var r,o=0;("number"==typeof(null==e?void 0:e.param_from)&&(o=e.param_from),3!==o)&&((null==n||null===(r=n.filter((function(e){return e.name===t.param_key})))||void 0===r?void 0:r.length)&&(o=1));return t.param_from=o,t}function Qo(t,e,n){var r=e.t0,o=e.t1,i=e.t2,u=e.t3,a={message:"å¨çº¿åæ°è¯·æ±æ°æ®",state:1,api_total_duration:u-r,retry_count:-1,param_key:e.param_key,param_value:e.param_value,param_from:e.param_from};if(n){var c=n||{},s=c.code,f=c.msg,l=c.retryCount;a.code=s,a.error_message=f,a.retry_count=l,a.builld_request_body_duration=o-r,a.api_request_duration=i-o,a.data_process_duration=u-i}t.trackLogEvent(a)}var Yo={intervalTimer:null,mergeType:0,idProperties:{},defaultConfig:[],serverConfig:[],currentServerConfig:[],combinationId:"",eventProperties:{},userProperties:{},customRequestTimeout:0},$o="_default_config",Jo="_serevr_config",Xo="_combination_id",Zo="_group_id_list",ti="_experiment_group_id_list",ei="_experiment_history";var ni=Object.assign,ri=Object.defineProperty,oi=!ni||o((function(){if(i&&1!==ni({b:1},ni(ri({},"a",{enumerable:!0,get:function(){ri(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=ni({},t)[n]||mr(ni({},e)).join("")!=r}))?function(t,e){for(var n=Rt(t),r=arguments.length,o=1,u=_t.f,a=c.f;r>o;)for(var s,f=d(arguments[o++]),l=u?mr(f).concat(u(f)):mr(f),p=l.length,v=0;p>v;)s=l[v++],i&&!a.call(f,s)||(n[s]=f[s]);return n}:ni;Dt({target:"Object",stat:!0,forced:Object.assign!==oi},{assign:oi});function ii(t,e,n){var r=e.t0,o=e.t1,i=n||{},u={message:"å¤é¾æ¥è¯éªè¯·æ±æ°æ®",state:5,code:i.code,error_message:i.msg,retry_count:i.retryCount,api_request_duration:o-r};t.trackLogEvent(u)}var ui={addMask:function(t){var e,n,r=this,o="body{opacity:0 !important;-khtml-opacity:0 !important;-moz-opacity:0;filter:alpha(opacity=0);}",i=document.createElement("style");i.type="text/css";try{i.appendChild(document.createTextNode(o))}catch(t){i.styleSheet.cssText=o}this.styleElement=i,null===(e=document.getElementsByTagName("head"))||void 0===e||null===(n=e[0])||void 0===n||n.appendChild(i),this.removeMaskTimer=setTimeout((function(){r.removeMask()}),1e3*t)},removeMask:function(){var t,e;(clearTimeout(this.removeMaskTimer),this.styleElement)&&(null===(t=document.getElementsByTagName("head"))||void 0===t||null===(e=t[0])||void 0===e||e.removeChild(this.styleElement),this.styleElement=null)}},ai={idProperties:{},serverConfig:[],eventProperties:{},userProperties:{},customRequestTimeout:0},ci={multilinkHistory:"_multilink_history"+location.pathname};return{env:0,version:"1.1.0",init:function(t){if(!(null==t?void 0:t.NATIVE)||"function"!=typeof(null==t?void 0:t.extend))return console.error("SESDK Error: Plugin can not be used alone, you need to rely on the webSDK");!function(t){t.extend({abtest:{init:function(e){Yo.mergeType=e.mergeType||0,Yo.idProperties=qo(t,e),Yo.defaultConfig=t.Storage.getItem($o,!0,[]),"number"==typeof e.requestTimeout&&e.requestTimeout>0&&(Yo.customRequestTimeout=e.requestTimeout),this.checkCacheConfig(),this.initReportData(),this.getOnlineConfig(!0)},initReportData:function(){Lo(t,Xo,t.Storage.getItem(Xo)||null),Ko(t,Zo),Ko(t,ti),Lo(t,"_custom_id",Yo.idProperties.customIDProperties),Lo(t,"_event_custom_id",Yo.idProperties.customIDEventProperties),Lo(t,"_user_custom_id",Yo.idProperties.customIDUserProperties)},checkCacheConfig:function(){var e;Yo.combinationId=t.Storage.getItem(Xo)||"",Yo.serverConfig=t.Storage.getItem(Jo,!0,[]),Yo.combinationId&&!(null===(e=Yo.serverConfig)||void 0===e?void 0:e.length)&&(Yo.combinationId="",t.Storage.deleteItem(Xo))},getOnlineConfig:function(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.checkCacheConfig();var o=t.deepCopy(t.getStateData("reportData")||{}),i=t.deepCopy(o.properties);delete o.properties,delete o._package_type;var u=ur(ur(ur({},o),i),{},{_combination_id:e&&1===Yo.mergeType?"":Yo.combinationId,event_properties:ur({},Yo.eventProperties),user_properties:ur({},Yo.userProperties),_custom_id:Yo.idProperties.customIDProperties,_event_custom_id:Yo.idProperties.customIDEventProperties,_user_custom_id:Yo.idProperties.customIDUserProperties,experiment_history:t.Storage.getItem(ei,!0,[])});return r.t1=+new Date,new Promise((function(t){n.requestRetry(t,u,e,r)}))},requestRetry:function(e,n,r,o){var i=this,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:t.settingData.ruleRetryTimes;t.HttpHelper.post("//".concat(t.settingData.ruleDomain,"/rule/config/get"),n,{timeout:Yo.customRequestTimeout||1e3*t.settingData.ruleTimeout}).then((function(t){o.t2=+new Date,0===(null==t?void 0:t.code)&&i.handleServerConfig((null==t?void 0:t.data)||{},r),e({retryCount:3-u,code:null==t?void 0:t.code,msg:null==t?void 0:t.msg}),i.setTimer()})).catch((function(a){u>0&&!Yo.customRequestTimeout?(u--,i.requestRetry(e,n,r,o,u)):(i.setTimer(),e({retryCount:t.settingData.ruleRetryTimes-u,code:(null==a?void 0:a.code)||"timeout",msg:(null==a?void 0:a.msg)||a}))}))},setTimer:function(){var e=this;clearTimeout(Yo.intervalTimer),Yo.intervalTimer=setTimeout((function(){return e.getOnlineConfig()}),1e3*t.settingData.ruleInterval)},handleServerConfig:function(e,n){var r,o=e.params||[],i=null==e?void 0:e._combination_id,u=(null===(r=o)||void 0===r?void 0:r.length)||0;Yo.currentServerConfig=o,i&&(Yo.combinationId=i,t.Storage.setItem(Xo,i),Lo(t,Xo,i)),i&&u&&(Bo(t,o,Zo),Bo(t,o,ti,2),t.Storage.setItem(ei,o.filter((function(t){return 2===t.from})).map((function(t){return{entity_id:t.entity_id,group_id:t.group_id}}))),0!==Yo.mergeType&&n||(o=function(t,e){return(null==e?void 0:e.length)?e.filter((function(e){return t.findIndex((function(t){return t.name===e.name}))<0})).concat(t):t}(o,Yo.serverConfig)),Yo.serverConfig=o,Uo(t,Jo,o,u))},getConfigByKey:function(e){var n=Go(Yo.serverConfig,e);return null===n?(n=Go(Yo.defaultConfig,e),t.isObject(n)&&(n.param_from=3)):n.param_from=2,n},trackTriageEvents:function(e){if(!Ho(t,e))if(1===e.from){var n={_enter_group_id:e.entityId,_enter_group_status:e.status};t.trackEvent("_diversion_service",n,{},{_event_type:2})}else{var r={_experiment_id:e.groupId,_experiment_group_id:e.entityId,_experiment_status:e.status};t.trackEvent("_abtesting_shunt",r,{},{_event_type:2})}}}})}(t),function(t){t.NATIVE=Object.assign(t.NATIVE,{setRemoteDefaultConfig:function(e){if(t.getStateData("logEnabled")&&t.infoLog("setRemoteDefaultConfig",e),!Array.isArray(e))return t.assert(!1,440103);Yo.defaultConfig=e,t.Storage.setItem($o,e)},setRemoteConfigEventProperties:function(e){if(t.getStateData("logEnabled")&&t.infoLog("setRemoteConfigEventProperties",e),!t.isObject(e))return t.assert(!1,440120);Yo.eventProperties=Object.assign(Yo.eventProperties,e)},setRemoteConfigUserProperties:function(e){if(t.getStateData("logEnabled")&&t.infoLog("setRemoteConfigUserProperties",e),!t.isObject(e))return t.assert(!1,440120);Yo.userProperties=Object.assign(Yo.userProperties,e)},fastFetchRemoteConfig:function(e){if(t.getStateData("logEnabled")&&t.infoLog("fastFetchRemoteConfig",e),!e||"string"!=typeof e||!t.trimStr(e))return t.assert(!1,440105);var n={t0:+new Date,param_key:e},r=t.abtest.getConfigByKey(e),o=null;return r&&void 0!==r.value&&(r.groupId&&t.abtest.trackTriageEvents(r),o=r.value),Qo(t,Wo(n,r,Yo.currentServerConfig)),o},asyncFetchRemoteConfig:function(e){if(t.getStateData("logEnabled")&&t.infoLog("asyncFetchRemoteConfig",e),!e||"string"!=typeof e||!t.trimStr(e))return t.assert(!1,440105);var n={t0:+new Date,param_key:e};return new Promise((function(r){t.NATIVE.ready((function(){t.abtest.getOnlineConfig(!1,n).then((function(o){var i=t.abtest.getConfigByKey(e),u=null;i&&void 0!==i.value&&(i.groupId&&t.abtest.trackTriageEvents(i),u=i.value),r(u),Qo(t,Wo(n,i,Yo.currentServerConfig),o)}))}))}))}})}(t),function(t){t.extend({multilinkTest:{runtime:!0,init:function(e){this.initRemoteConfig(e),ai.idProperties=qo(t,e),this.initReportData(),this.getOnlineConfig()},initRemoteConfig:function(e){ai.maskTimeoutCloseTime=t.settingData.maskTimeoutCloseTime,"number"==typeof e.requestTimeout&&e.requestTimeout>0&&(ai.customRequestTimeout=e.requestTimeout),"number"==typeof(null==e?void 0:e.maskTimeoutCloseTime)&&e.maskTimeoutCloseTime/1e3>t.settingData.minMaskTimeoutCloseTime&&(ai.maskTimeoutCloseTime=e.maskTimeoutCloseTime/1e3),(null==e?void 0:e.isSetMask)&&ui.addMask(ai.maskTimeoutCloseTime)},initReportData:function(){Lo(t,"_custom_id",ai.idProperties.customIDProperties),Lo(t,"_event_custom_id",ai.idProperties.customIDEventProperties),Lo(t,"_user_custom_id",ai.idProperties.customIDUserProperties)},getOnlineConfig:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.deepCopy(t.getStateData("reportData")||{}),o=t.deepCopy(r.properties);delete r.properties,delete r._package_type,delete o._combination_id,delete o._experiment_group_id_list,delete o._group_id_list;var i=ur(ur(ur({},r),o),{},{event_properties:ur({},ai.eventProperties),user_properties:ur({},ai.userProperties),_custom_id:ai.idProperties.customIDProperties,_event_custom_id:ai.idProperties.customIDEventProperties,_user_custom_id:ai.idProperties.customIDUserProperties,experiment_history:t.Storage.getItem(ci.multilinkHistory,!0,[])});return n.t0=+new Date,new Promise((function(t){e.requestRetry(t,i,n)}))},requestRetry:function(e,n,r){var o=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.settingData.multilinkRetryTimes;t.HttpHelper.post("//".concat(t.settingData.ruleDomain,"/rule/config/multilink/get"),n,{timeout:ai.customRequestTimeout||1e3*t.settingData.multilinkTimeout}).then((function(e){r.t1=+new Date,0===(null==e?void 0:e.code)&&o.handleServerConfig((null==e?void 0:e.data)||{}),ui.removeMask();var n={retryCount:3-i,code:null==e?void 0:e.code,msg:null==e?void 0:e.msg};ii(t,r,n)})).catch((function(u){if(i>0&&!ai.customRequestTimeout)i--,o.requestRetry(e,n,r,i);else{r.t1=+new Date,ui.removeMask(),t.customEvents.$emit("multilinkTestResponse");var a={retryCount:t.settingData.multilinkRetryTimes-i,code:(null==u?void 0:u.code)||"timeout",msg:(null==u?void 0:u.msg)||u};ii(t,r,a)}}))},handleServerConfig:function(e){var n,r,o,i,u,a,c,s=e.params||[],f=t.trimStr((null===(n=s[0])||void 0===n?void 0:n.url)||"");if((null==s?void 0:s.length)&&f){var l={url:f,subjectId:null===(r=s[0])||void 0===r?void 0:r.subject_id,entityId:null===(o=s[0])||void 0===o?void 0:o.entity_id,groupId:null===(i=s[0])||void 0===i?void 0:i.group_id,status:null===(u=s[0])||void 0===u?void 0:u.status,subjectName:null===(a=s[0])||void 0===a?void 0:a.subject_name,subjectValue:null===(c=s[0])||void 0===c?void 0:c.subject_value},p=Ho(t,l);p||this.trackTriageEvents(l);var d=f===location.href;d&&t.customEvents.$emit("multilinkTestResponse"),t.Storage.setItem(ci.multilinkHistory,s.map((function(t){return{entity_id:t.entity_id,group_id:t.group_id}}))),d||setTimeout((function(){location.href=l.url}),p?0:1e3*t.settingData.multilinkJumpWaitSendEvent)}else t.customEvents.$emit("multilinkTestResponse")},trackTriageEvents:function(e){var n={_experiment_id:e.groupId,_experiment_group_id:e.entityId,_experiment_status:e.status};t.trackEvent("_abtesting_shunt",n,{},{_event_type:2})}}})}(t),function(t){t.NATIVE=Object.assign(t.NATIVE,{setMultilinkTestEventProperties:function(e){if(t.getStateData("logEnabled")&&t.infoLog("setMultilinkTestEventProperties",e),!t.isObject(e))return t.assert(!1,440120);ai.eventProperties=Object.assign(ai.eventProperties,e)},setMultilinkTestUserProperties:function(e){if(t.getStateData("logEnabled")&&t.infoLog("setMultilinkTestUserProperties",e),!t.isObject(e))return t.assert(!1,440120);ai.userProperties=Object.assign(ai.userProperties,e)}})}(t)}}}));
