!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).SESDK=t()}(this,(function(){"use strict";function e(){return(e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function t(){var e=r.Storage.getItem(r.STORAGE_EVENT_QUEUE,!0,[]);e.forEach((function(e){e.status="toSubmit"})),r.Storage.setItem(r.STORAGE_EVENT_QUEUE,e),r.getStateData("debugModel")||null===this.Storage.getItem(r.STORAGE_IS_FIRST_DAY)&&this.Storage.setItem(r.STORAGE_IS_FIRST_DAY,r.seDate.getCurDate())}var r={extend:function(){var e=arguments[0]||{},t=this;for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}};function n(e){return{"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regExp","[object Undefined]":"undefined","[object Null]":"null","[object Object]":"object","[object Symbol]":"symbol","[object BigInt]":"bigInt","[object HTMLDocument]":"htmlDocument","[object Promise]":"promise"}[Object.prototype.toString.call(e)]}function i(e){return"[object Object]"===Object.prototype.toString.call(e)}r.extend({init:function(n){if(n.reportData._session_id=r.generateUUID(),this.isWeb()){var i=this.Storage.getItem("distinct_id");if(i)n.reportData._distinct_id=i;else{var a=this.generateUUID();n.reportData._distinct_id=a,this.Storage.setItem("distinct_id",a)}}n.reportData._visitor_id=this.Storage.getItem("_visitor_id")||n.reportData._distinct_id,n.reportData._account_id=this.Storage.getItem("_account_id")||"";var o=this.getStateData("reportData"),s={properties:e({},o.properties,n.reportData.properties)};this.setStateData({"externalReportData.superProperties":r.Storage.getItem("superProperties",!0),reportData:e({},o,n.reportData,s)}),t.bind(r)()}});var a={440100:"Please call method:prevInit before initializing",440101:"Please configure your appKey/userId correctly!",440102:"Please configure the parameter information of trackPageClick correctly!",440103:"Please configure your default parameter configuration correctly, you need to pass Array!",440104:"Please configure the online parameters correctly to configure the polling interval (unit: minutes), in the range of 30 minutes - 24 hours!",440105:"Illegal parameter format, String needs to be passed!",440106:"Illegal parameter format String must be passed and cannot start with underscore_!",440107:"Initialize A/B test, need to load A/B test plugin!",440108:"Data request failed {#1}",440109:"The plugin is missing the init method!",440110:"Illegal formatting of custom attributes bound in dom elements!",440111:"The corresponding mutation method is not registered!",440112:"The corresponding mutation method is not registered!",440113:"The corresponding Complete method is not registered in the observer monitor!",440114:"The corresponding Error method is not registered in the observer monitor!",440115:"Illegal parameter format, Object or Array needs to be passed!",440116:"Illegal parameter format, Array<object> needs to be passed!",440117:"Illegal parameter format, need to pass parameter value ({#1})!",440119:"Failed to obtain device information!",440120:"Illegal parameter format, Object needs to be passed!",440121:"Illegal parameter format String with length less than 128 characters must be passed!",440122:"Illegal parameter format Requires the correct preconfigured event type ({#1}) or all!",440123:"The maximum length of data that can be stored by a single key must be less than 1MB. And the upper limit of all data stores is 10MB",440124:"setStorage error {#1}",440125:"The mini program openid has not been obtained.",440126:"Currently loaded plugin does not match the main SDK runtime environment",440127:"Plugin version must be the same as the main SDK version (plugin version {#1}, main SDK version {#2})",440601:"error: {#1}. The custom event name must be string type.",440602:'error: {#1}. The custom event name must start with a lowercase letter but cannot start with an underscore. Other characters can contain numbers, lowercase letters, and underscores "_".',440603:"error: {#1}. The custom event name must contain a maximum of 40 characters.",440604:"Call eventStart first to record the start time.",440605:"error: {#1}. The key of custom properties  must be string type",440606:'error: {#1}. The key of custom properties must start with a lowercase letter but cannot start with an underscore. Other characters can contain numbers, lowercase letters, and underscores "_".',440607:"error: {#1}. The key of custom properties must contain a maximum of 40 characters.",440608:"error: {#1}. The above params are required.",440609:"error: {#1}. The type of above params is incorrect.",440610:"error: {#1}. The value of each key must be string, number or boolean."};function o(e,t,n){var i,o,s=t;!isNaN(t)&&a[t]&&(s="[CODE: "+t+"] "+a[t],n&&(i=n,o=function(e,t){s=s.replace(new RegExp(t,"g"),e)},Object.keys(i).forEach((function(e){return o(i[e],e)})))),e||(r.customEvents.$emit("assertMsg",s),console.warn("[SESDK] "+s))}var s=console;function u(e,t,r){var n='SESDK Log(The "'+e+'" method parameters passed by the developer):';r?s.log(n,t,",",r):s.log(n,t)}function c(){if("object"==typeof crypto){if("function"==typeof crypto.randomUUID)return crypto.randomUUID();if("function"==typeof crypto.getRandomValues&&"function"==typeof Uint8Array)return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){var t=Number(e);return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)}))}var e=(new Date).getTime(),t="undefined"!=typeof performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(r){var n=16*Math.random();return e>0?(n=(e+n)%16|0,e=Math.floor(e/16)):(n=(t+n)%16|0,t=Math.floor(t/16)),("x"===r?n:3&n|8).toString(16)}))}var l=function(){return 1===r.getStateData("systemEnv")},p=function(){return 0===r.getStateData("systemEnv")};r.extend({infoLog:u,deepCopy:function e(t,r){if(void 0===r&&(r=[]),null===t||"object"!=typeof t)return t;var n,i=(n=function(e){return e.original===t},r.find(n));if(i)return i.copy;var a=Array.isArray(t)?[]:{};return r.push({original:t,copy:a}),Object.keys(t).forEach((function(n){a[n]=e(t[n],r)})),a},stringLikeJsonToObject:function(e){var t,r,n={};return e?n=null==(t=e.replace(/(\s*\{)|(\}\s*)/g,""))||null==(r=t.split(","))?void 0:r.reduce((function(e,t){var r=t.split(":"),n=r[0].replace(/^\s*|\s*$/g,""),i=r[1].replace(/^\s*|\s*$/g,"").replace(/^(\"|\')|(\"|\')$/g,"");try{i=JSON.parse(i)}catch(e){i=i}return e[n]=i,e}),{}):n},isObject:i,isPromise:function(e){return e&&"function"==typeof e.then},getType:n,limitParamType:function(e,t){return!!["string","number","boolean"].includes(typeof t)||(o(!1,440610,{"{#1}":e}),!1)},assert:o,generateUUID:c,trimStr:function(e){return null==e?void 0:e.replace(/^\s+|\s+$/g,"")},isWeb:p,isXcxEnv:l});var d,f=(function(e,t){e.exports=function(){var e=6e4,t=36e5,r="millisecond",n="second",i="minute",a="hour",o="day",s="week",u="month",c="quarter",l="year",p="date",d="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],r=e%100;return"["+e+(t[(r-20)%10]||t[r]||t[0])+"]"}},v=function(e,t,r){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(r)+e},h={s:v,z:function(e){var t=-e.utcOffset(),r=Math.abs(t),n=Math.floor(r/60),i=r%60;return(t<=0?"+":"-")+v(n,2,"0")+":"+v(i,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var n=12*(r.year()-t.year())+(r.month()-t.month()),i=t.clone().add(n,u),a=r-i<0,o=t.clone().add(n+(a?-1:1),u);return+(-(n+(r-i)/(a?i-o:o-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:u,y:l,w:s,d:o,D:p,h:a,m:i,s:n,ms:r,Q:c}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},_="en",y={};y[_]=m;var S=function(e){return e instanceof k},b=function e(t,r,n){var i;if(!t)return _;if("string"==typeof t){var a=t.toLowerCase();y[a]&&(i=a),r&&(y[a]=r,i=a);var o=t.split("-");if(!i&&o.length>1)return e(o[0])}else{var s=t.name;y[s]=t,i=s}return!n&&i&&(_=i),i||!n&&_},D=function(e,t){if(S(e))return e.clone();var r="object"==typeof t?t:{};return r.date=e,r.args=arguments,new k(r)},x=h;x.l=b,x.i=S,x.w=function(e,t){return D(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var k=function(){function m(e){this.$L=b(e.locale,null,!0),this.parse(e)}var v=m.prototype;return v.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(x.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(f);if(n){var i=n[2]-1||0,a=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,a)):new Date(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,a)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},v.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},v.$utils=function(){return x},v.isValid=function(){return!(this.$d.toString()===d)},v.isSame=function(e,t){var r=D(e);return this.startOf(t)<=r&&r<=this.endOf(t)},v.isAfter=function(e,t){return D(e)<this.startOf(t)},v.isBefore=function(e,t){return this.endOf(t)<D(e)},v.$g=function(e,t,r){return x.u(e)?this[t]:this.set(r,e)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(e,t){var r=this,c=!!x.u(t)||t,d=x.p(e),f=function(e,t){var n=x.w(r.$u?Date.UTC(r.$y,t,e):new Date(r.$y,t,e),r);return c?n:n.endOf(o)},g=function(e,t){return x.w(r.toDate()[e].apply(r.toDate("s"),(c?[0,0,0,0]:[23,59,59,999]).slice(t)),r)},m=this.$W,v=this.$M,h=this.$D,_="set"+(this.$u?"UTC":"");switch(d){case l:return c?f(1,0):f(31,11);case u:return c?f(1,v):f(0,v+1);case s:var y=this.$locale().weekStart||0,S=(m<y?m+7:m)-y;return f(c?h-S:h+(6-S),v);case o:case p:return g(_+"Hours",0);case a:return g(_+"Minutes",1);case i:return g(_+"Seconds",2);case n:return g(_+"Milliseconds",3);default:return this.clone()}},v.endOf=function(e){return this.startOf(e,!1)},v.$set=function(e,t){var s,c=x.p(e),d="set"+(this.$u?"UTC":""),f=(s={},s[o]=d+"Date",s[p]=d+"Date",s[u]=d+"Month",s[l]=d+"FullYear",s[a]=d+"Hours",s[i]=d+"Minutes",s[n]=d+"Seconds",s[r]=d+"Milliseconds",s)[c],g=c===o?this.$D+(t-this.$W):t;if(c===u||c===l){var m=this.clone().set(p,1);m.$d[f](g),m.init(),this.$d=m.set(p,Math.min(this.$D,m.daysInMonth())).$d}else f&&this.$d[f](g);return this.init(),this},v.set=function(e,t){return this.clone().$set(e,t)},v.get=function(e){return this[x.p(e)]()},v.add=function(r,c){var p,d=this;r=Number(r);var f=x.p(c),g=function(e){var t=D(d);return x.w(t.date(t.date()+Math.round(e*r)),d)};if(f===u)return this.set(u,this.$M+r);if(f===l)return this.set(l,this.$y+r);if(f===o)return g(1);if(f===s)return g(7);var m=(p={},p[i]=e,p[a]=t,p[n]=1e3,p)[f]||1,v=this.$d.getTime()+r*m;return x.w(v,this)},v.subtract=function(e,t){return this.add(-1*e,t)},v.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return r.invalidDate||d;var n=e||"YYYY-MM-DDTHH:mm:ssZ",i=x.z(this),a=this.$H,o=this.$m,s=this.$M,u=r.weekdays,c=r.months,l=function(e,r,i,a){return e&&(e[r]||e(t,n))||i[r].slice(0,a)},p=function(e){return x.s(a%12||12,e,"0")},f=r.meridiem||function(e,t,r){var n=e<12?"AM":"PM";return r?n.toLowerCase():n},m={YY:String(this.$y).slice(-2),YYYY:this.$y,M:s+1,MM:x.s(s+1,2,"0"),MMM:l(r.monthsShort,s,c,3),MMMM:l(c,s),D:this.$D,DD:x.s(this.$D,2,"0"),d:String(this.$W),dd:l(r.weekdaysMin,this.$W,u,2),ddd:l(r.weekdaysShort,this.$W,u,3),dddd:u[this.$W],H:String(a),HH:x.s(a,2,"0"),h:p(1),hh:p(2),a:f(a,o,!0),A:f(a,o,!1),m:String(o),mm:x.s(o,2,"0"),s:String(this.$s),ss:x.s(this.$s,2,"0"),SSS:x.s(this.$ms,3,"0"),Z:i};return n.replace(g,(function(e,t){return t||m[e]||i.replace(":","")}))},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(r,p,d){var f,g=x.p(p),m=D(r),v=(m.utcOffset()-this.utcOffset())*e,h=this-m,_=x.m(this,m);return _=(f={},f[l]=_/12,f[u]=_,f[c]=_/3,f[s]=(h-v)/6048e5,f[o]=(h-v)/864e5,f[a]=h/t,f[i]=h/e,f[n]=h/1e3,f)[g]||h,d?_:x.a(_)},v.daysInMonth=function(){return this.endOf(u).$D},v.$locale=function(){return y[this.$L]},v.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),n=b(e,t,!0);return n&&(r.$L=n),r},v.clone=function(){return x.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},m}(),w=k.prototype;return D.prototype=w,[["$ms",r],["$s",n],["$m",i],["$H",a],["$W",o],["$M",u],["$y",l],["$D",p]].forEach((function(e){w[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),D.extend=function(e,t){return e.$i||(e(t,k,D),e.$i=!0),D},D.locale=b,D.isDayjs=S,D.unix=function(e){return D(1e3*e)},D.en=y[_],D.Ls=y,D.p={},D}()}(d={exports:{}}),d.exports),g={dayjs:f,dateFormat:"YYYYMMDD",dateTimeFormat:"YYYY-MM-DD HH:mm:ss",getCurDate:function(){return f().format("YYYYMMDD")},getCurTime:function(){return f().format("YYYY-MM-DD HH:mm:ss")},getTimeGap:function(e,t){return f(f(t)).diff(f(e),"millisecond")}};r.extend({seDate:g});var m=["_web","_mp"],v=function(){return[r.getCurEnvEventName("_appInstall"),"_mpInstall"]};r.extend({STORAGE_IS_FIRST_DAY:"_is_first_day",STORAGE_MP_ON_LAUNCH_TIME:"_mp_on_launch_time",STORAGE_EVENT_QUEUE:"_event_queue"}),r.extend({createStorageKey:function(e){return"sesdk_config_"+e}});var h=new(function(e){var t,r;function n(){var t;return(t=e.call(this)||this).settingHost=void 0,t.receiverSDKLogDomain=void 0,t.receiverSDKLogAppkey=void 0,t.receiverSDKLogTenantId=void 0,t}return r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,n}((function(){this.isPrivate=!1,this.receiverDomain=void 0,this.ruleDomain=void 0,this.openidDomain=void 0,this.packageType=void 0})));h.receiverDomain="test-mintegral.detailroi.com",h.ruleDomain="test5-solar.detailroi.com",h.settingHost="test5-solar.detailroi.com",h.openidDomain="test5-solar.detailroi.com",h.packageType=1,h.receiverSDKLogDomain="api-receiver.detailroi.com",h.receiverSDKLogAppkey="91c316e1b444a0e9",h.receiverSDKLogTenantId="302948fdd2be46e6";var _={intervalTimer:null,receiverSDKLogDomain:h.receiverSDKLogDomain,settingTimeout:60,settingRetryTimes:3,settingInterval:1800,settingPolingMinRange:1800,settingPolingMaxRange:86400,receiverTimeout:60,receivertRetryTimes:3,ruleTimeout:60,ruleRetryTimes:3,ruleInterval:1800,rulePolingMinRange:1800,rulePolingMaxRange:86400,multilinkTimeout:60,multilinkRetryTimes:3,maskTimeoutCloseTime:.5,minMaskTimeoutCloseTime:.2,multilinkJumpWaitSendEvent:.3,openIdTimeout:60,openIdRetryTimes:3,eventPollingInterval:10,eventPollingMaxCount:50};var y=[{key:"settingTimeout",skey:"a"},{key:"settingRetryTimes",skey:"b",zero:!0},{key:"receiverTimeout",skey:"c"},{key:"receivertRetryTimes",skey:"d",zero:!0},{key:"ruleTimeout",skey:"e"},{key:"ruleRetryTimes",skey:"f",zero:!0},{key:"multilinkTimeout",skey:"g"},{key:"multilinkRetryTimes",skey:"h",zero:!0},{key:"maskTimeoutCloseTime",skey:"i"},{key:"minMaskTimeoutCloseTime",skey:"j"},{key:"multilinkJumpWaitSendEvent",skey:"k"},{key:"openIdTimeout",skey:"l"},{key:"openIdRetryTimes",skey:"m",zero:!0},{key:"eventPollingInterval",skey:"n"},{key:"eventPollingMaxCount",skey:"o"},{key:"settingInterval",skey:"p",condition:!0},{key:"ruleInterval",skey:"q",condition:!0}];function S(e,t,r){void 0===r&&(r=!1);var i=r?t>=0:t>0;"number"===n(t)&&i&&(_[e]=t)}function b(e){void 0===e&&(e=_.settingRetryTimes),r.HttpHelper.post("//"+h.settingHost+"/rule/config/global/info",{_appKey:r.getStateData("_appkey")},{timeout:1e3*_.settingTimeout}).then((function(e){if(0===(null==e?void 0:e.code)){var t=(null==e?void 0:e.data)||{},i=t.receiverSDKLogDomain,a=t.settingPolingMinRange,o=t.settingPolingMaxRange,s=t.settingInterval,u=t.receiverDomain,c=t.ruleDomain,l=t.rulePolingMinRange,p=t.rulePolingMaxRange,d=t.ruleInterval;y.filter((function(e){return!e.condition})).forEach((function(e){return S(e.key,t[e.key],e.zero)})),i&&(_.receiverSDKLogDomain=x(i)),"number"===n(a)&&"number"===n(o)&&a<o&&(a>0&&(_.settingPolingMinRange=a),o>0&&(_.settingPolingMaxRange=o)),"number"===n(s)&&(s<_.settingPolingMinRange?s=_.settingPolingMinRange:s>_.settingPolingMaxRange&&(s=_.settingPolingMaxRange),_.settingInterval=s),u&&(_.receiverDomain=x(u)),c&&(_.ruleDomain=x(c)),"number"===n(l)&&"number"===n(p)&&l<p&&(l>0&&(_.rulePolingMinRange=l),p>0&&(_.rulePolingMaxRange=p)),"number"===n(d)&&(d<_.rulePolingMinRange?d=_.rulePolingMinRange:d>_.rulePolingMaxRange&&(d=_.rulePolingMaxRange),_.ruleInterval=d),f=y.reduce((function(e,t){return e[t.skey]=_[t.key],e}),{}),r.Storage.setItem("_setting_host",Object.assign({rcdm:_.receiverDomain,rdm:_.ruleDomain},f))}var f;D()})).catch((function(){e>0?b(--e):D()}))}function D(){clearTimeout(_.intervalTimer),_.intervalTimer=setTimeout((function(){return b()}),1e3*_.settingInterval)}function x(e){return e.replace(/^\s+|\s+$/g,"").replace(/^(http:\/\/|https:\/\/)/g,"").replace(/\/+$/g,"")}function k(e){void 0===e&&(e=!1);var t=e?_.receiverSDKLogDomain:_.receiverDomain,n="//"+t+"/datareceiver/receive/v1/debugApi",i="//"+t+"/datareceiver/receive/v1/api";return r.getStateData("debugModel")&&!e?n:i}function w(e){r.getStateData("isInMultilinkTest")?r.customEvents.$on("multilinkTestResponse",(function(){"function"==typeof e&&e()})):"function"==typeof e&&e()}r.extend({settingData:_}),r.extend({waitToSendEvent:w});var O={isInMultilinkTest:!1,isInApp:!1,appData:{outlayerData:{},properties:{}},externalReportData:{superProperties:{},appInstall:{},appStart:{},appEnd:{}},reportData:{_package_type:h.packageType,_tenant_id:"",_appkey:"",_source_type:"sdk",_event_name:"",_session_id:"",_type:"event",_event_id:"",_ts:0,_ua:"",_distinct_id:"",_distinct_id_type:1001,custom_properties:{},properties:{_platform:0,_os_version:"",_screen_width:0,_screen_height:0,_device_model:"",_device_type:0,_network_type:1,_lib:0,_lib_version:"1.1.0",_browser:"",_browser_version:"",_is_first_day:!1,_is_first_time:!1,_log_count:0}},isHasOpenId:!1,systemEnv:0,debugModel:!1,logEnabled:!1,isSendSDKLog:!0};r.extend({setStateData:function(e){if(!i(e))return r.assert(!1,440120);var t="boolean"==typeof e.delete&&e.delete;delete e.delete,Object.keys(e).forEach((function(r){var n=O,i=r.split(".");i.length>1?i.forEach((function(a,o){o<i.length-1?n=n[a]:t&&n.hasOwnProperty(a)?delete n[a]:n[a]=e[r]})):t&&n.hasOwnProperty(r)?delete O[r]:O[r]=e[r]}))},getStateData:function(e){if(e){if(e.indexOf(".")<0)return O[e];var t=O,r=e.split("."),n=null;return r.forEach((function(e,i){i<r.length-1?t=t[e]:n=t[e]})),n}}});var T={get:function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),r.requestHandle({url:e,method:"get",params:t},n)},post:function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),r.requestHandle({url:e,method:"post",data:t},n)}};r.extend({HttpHelper:T});var E={eventList:{},$on:function(e,t){this.eventList[e]||(this.eventList[e]={}),Array.isArray(this.eventList[e].emitList)&&this.eventList[e].emitList.forEach((function(e){return t(e)})),Array.isArray(this.eventList[e].onList)||(this.eventList[e].onList=[]),this.eventList[e].onList.push(t)},$emit:function(e,t){this.eventList[e]||(this.eventList[e]={}),Array.isArray(this.eventList[e].emitList)||(this.eventList[e].emitList=[]),this.eventList[e].emitList.push(t),Array.isArray(this.eventList[e].onList)&&this.eventList[e].onList.forEach((function(e){return e(t)}))},$off:function(e,t){var r,n=null==(r=this.eventList[e])?void 0:r.onList;if(Array.isArray(n))for(var i=0;i<n.length;i++)if(t===n[i]){n.splice(i,1);break}}};r.extend({customEvents:E});var $=e({},{adNetworkPlatform:{keyName:"_ad_platform",type:"string",isRequired:!0},adType:{keyName:"_ad_type",type:"int",isRequired:!0},adNetworkAppID:{keyName:"_ad_appid",type:"string",isRequired:!1},adId:{keyName:"_ad_id",type:"string",isRequired:!0},mediationPlatform:{keyName:"_mediation_platform",type:"string",isRequired:!0},ecpm:{keyName:"_ad_ecpm",type:"number",isRequired:!0},currency:{keyName:"_currency_type",type:"string",isRequired:!0},rendered:{keyName:"_is_rendered",type:"boolean",isRequired:!0}},{orderId:{keyName:"_order_id",type:"string",isRequired:!0},payAmount:{keyName:"_pay_amount",type:"number",isRequired:!0},currencyType:{keyName:"_currency_type",type:"string",isRequired:!0},payType:{keyName:"_pay_type",type:"string",isRequired:!0},productID:{keyName:"_product_id",type:"string",isRequired:!0},productName:{keyName:"_product_name",type:"string",isRequired:!0},productCount:{keyName:"_product_num",type:"number",isRequired:!0},payStatus:{keyName:"_pay_status",type:"number",isRequired:!0},failReason:{keyName:"_fail_reason",type:"string",isRequired:!1}},{status:{keyName:"_status",type:"string",isRequired:!1},regType:{keyName:"_reg_type",type:"string",isRequired:!0},registerStatus:{keyName:"_status",type:"string",isRequired:!0},loginType:{keyName:"_login_type",type:"string",isRequired:!0},loginStatus:{keyName:"_status",type:"string",isRequired:!0}},{adNetwork:{keyName:"_adnetwork",type:"string",isRequired:!0},subChannel:{keyName:"_sub_channel",type:"string",isRequired:!1},adAccountID:{keyName:"_adaccount_id",type:"string",isRequired:!1},adAccountName:{keyName:"_adaccount_name",type:"string",isRequired:!1},adCampaignID:{keyName:"_adcampaign_id",type:"string",isRequired:!1},adCampaignName:{keyName:"_adcampaign_name",type:"string",isRequired:!1},adOfferID:{keyName:"_adoffer_id",type:"string",isRequired:!1},adOfferName:{keyName:"_adoffer_name",type:"string",isRequired:!1},adCreativeID:{keyName:"_adcreative_id",type:"string",isRequired:!1},adCreativeName:{keyName:"_adcreative_name",type:"string",isRequired:!1},attributionPlatform:{keyName:"_attribution_platform",type:"string",isRequired:!0}});function I(e,t){var r=Object.create(null);"object"===n(t.customProperties)&&(r=t.customProperties);var i={};return e.forEach((function(e){i[$[e].keyName]=t[e]})),{properties:i,customProperties:r}}var A={};function C(e){try{e=["number","boolean","undefined","null","symbol","bigInt","function","date","regExp"].includes(n(e))?String(e):["object","array"].includes(n(e))?JSON.stringify(e):String(e)}catch(t){e=String(e)}return e}function P(e,t){var r=1048576;return"number"===n(t)&&(r=t),C(e).length>=r}function R(e,t){if(P(e,1048576)){var r,n,i=e.pop();v().includes(i.eventName)&&1===(null==(r=i.params)||null==(n=r[0])?void 0:n._event_type)?e.splice(1,0,i):t.push(i),R(e,t)}return e}function M(e,t,n){if(t||!v().includes(e)||1!==n||r.Storage.getItem("_event_queue",!0,[]).filter((function(e){var t,r;return v().includes(e.eventName)&&1===(null==(t=e.params)||null==(r=t[0])?void 0:r._event_type)})).length){var i="_event_"+e;r.Storage.setItem(i,e)}}function N(e,t,n){var i,a;void 0===e&&(e=""),void 0===n&&(n=!0),n&&(a=function(e){var t,n,i,a=(n=null==(t=r.Storage.getItem("_log_count"))?void 0:t.split("_")[0],i=g.getCurDate(),null===t||+n!=+i?0:Number(t.split("_")[1])+1);return e[0].properties._log_count=a,a}(t));var o={eventName:e,params:t,status:"toSubmit"},s=[],u=r.Storage.getItem("_event_queue");null!==u&&(s=JSON.parse(u)),s.unshift(o);var c=[];R(s,c),c.length&&r.trackLogEvent({state:2,message:"本地存储空间不足时删除的事件",event_name:c.map((function(e){return e.eventName})).join(","),log_count:c.map((function(e){var t,r,n;return null==(t=e.params)||null==(r=t[0])||null==(n=r.properties)?void 0:n._log_count})).join(",")});var l=!1;r.Storage.setItem("_event_queue",s,(function(){l=!0}));var p,d,f,m=null==(i=t[0])?void 0:i._event_type;return v().includes(e)&&1===m&&(r.Storage.setItem("_log_install_insert",1),r.trackLogEvent({state:l?201:101,is_success:!l,message:e+"存储本地",event_name:e,log_count:null==(p=t[0])?void 0:p.properties._log_count})),e&&M(e,!1,m),n&&(d=a,f=g.getCurDate()+"_"+d,r.Storage.setItem("_log_count",f)),l}function L(e){var t=Number(r.getStateData("systemEnv")),n=m[t];return r.getStateData("isInApp")?e:e.replace(/^_app/,n)}function j(t){if(void 0===t&&(t={}),_.isSass&&r.getStateData("isSendSDKLog")&&(!r.getStateData("debugModel")||[202,6,101,201].includes(t.state))){r.isXcxEnv()&&(t.env_version=r.getEnvVersion());var n=r.getStateData("reportData"),i=[e({},n,{_ts:Date.now(),_event_id:c(),_appkey:h.receiverSDKLogAppkey,_tenant_id:h.receiverSDKLogTenantId,_type:"event",_event_name:"sesdk_record_log",_event_type:-1,properties:e({},n.properties),custom_properties:e({user_appkey:n._appkey,user_tenantId:n._tenant_id,user_debugModel:r.getStateData("debugModel"),user_domain:_.receiverDomain,isInApp:r.getStateData("isInApp"),installInsert:"1"===r.Storage.getItem("_log_install_insert"),installSend:"1"===r.Storage.getItem("_log_install_send")},t)})],a=r.Storage.getItem("_log_event_queue",!0,[]);a.length&&(i=i.concat(a),r.Storage.deleteItem("_log_event_queue")),B(i)}}function B(e,t){void 0===t&&(t=_.receivertRetryTimes),r.HttpHelper.post(k(!0),e,{timeout:1e3*_.receiverTimeout}).then((function(r){void 0===r.status&&U(e,t)})).catch((function(r){U(e,t)}))}function U(e,t){t>0?B(e,--t):(e.length>100&&(e=e.slice(0,100)),r.Storage.setItem("_log_event_queue",e,null,!0))}function q(e,t){void 0===t&&(t=!1);var n=r.Storage.getItem("_log_count_send",!0,{}),i=g.getCurDate(),a=Object.keys(n).filter((function(e){return e!==i}));a.length&&a.forEach((function(e){j({message:"上报非当天的_log_count",log_date:e,log_count_list:n[e]}),delete n[e]})),Array.isArray(e)&&(e=e.sort((function(e,t){return e-t})),n[i]||(n[i]=[]),e.length&&n[i].push(e.length>1?e.join(","):e[0]),n[i].length&&((n[i].reduce((function(e,t){return e+String(t).split(",").length}),0)>=100||t)&&(j({message:"上报当天的_log_count",log_date:i,log_count_list:n[i]}),t||delete n[i]),r.Storage.setItem("_log_count_send",n)))}function V(){q(),H([6e4,3e5,18e5],0)}function H(e,t){t>2||setTimeout((function(){q([],!0),H(e,t+1)}),e[t])}function F(t,n,i,a){void 0===i&&(i={}),void 0===a&&(a={}),r.NATIVE.ready((function(){try{var o=L(t);!function(e){if(r.getStateData("debugModel"))return r.setStateData({"reportData.properties._is_first_day":!0,"reportData.properties._is_first_time":!0});var t=g.getCurDate(),n=r.Storage.getItem("_is_first_day");r.setStateData({"reportData.properties._is_first_day":t===n});var i="_event_"+e,a=r.Storage.getItem(i);r.setStateData({"reportData.properties._is_first_time":null===a})}(o);var s=r.getStateData("reportData"),u=r.getStateData("externalReportData"),l=[e({},s,a,{_ts:Date.now(),_event_id:c(),_type:"event",_event_name:o,_event_type:a._event_type||3,properties:e({},s.properties,n),custom_properties:e({},s.custom_properties,u.superProperties,i)})];if(0===r.getStateData("systemEnv")&&r.getStateData("debugModel"))return M(o,!0),J(Q(l,!1));var p=1===r.getStateData("systemEnv")&&r.getStateData("debugModel");if(N(o,l,-1!==a._event_type&&!p)||r.getStateData("isInMultilinkTest"))return K(k(),Q(l));W()}catch(e){j({state:999,message:"上报流程报错",error_message:JSON.stringify(e)})}}))}function W(){var e=r.Storage.getItem("_event_queue",!0,[]);if(0!==e.length&&0!=(l()&&!r.getStateData("isHasOpenId")?(r.assert(!1,440125),!1):!(void 0!==r.Storage.getItem(r.STORAGE_EVENT_QUEUE,!0,[]).find((function(e){return"submitting"===e.status}))))){var t=e.splice(0,100),n=[],i=t.map((function(e){e.status="submitting",n.push(e.params[0]._event_id);var t=e.params[0];return r.isXcxEnv()&&r.setXcxEventData(t),t._visitor_id=r.getStateData("reportData._visitor_id"),"userset"!==t._type&&(t.properties._group_id_list=r.getStateData("reportData.properties._group_id_list"),t.properties._experiment_group_id_list=r.getStateData("reportData.properties._experiment_group_id_list"),t.properties._combination_id=r.getStateData("reportData.properties._combination_id")),t}));e.unshift.apply(e,t),r.Storage.setItem("_event_queue",e),K(k(),Q(i))}}function Q(e,t){var n=r.getStateData("isInApp"),i=r.getStateData("appData.outlayerData"),a=r.getStateData("appData.properties");return n&&e.length?e.map((function(e){if("userset"!==e._type)return e.properties._primitive_attribute=JSON.stringify(e),(e=Object.assign(e,i)).properties=Object.assign(e.properties,a),e})):e}function K(e,t,n){void 0===n&&(n=_.receivertRetryTimes),r.getStateData("logEnabled")&&n===_.receivertRetryTimes&&u("report data list",t),r.HttpHelper.post(e,t,{timeout:1e3*_.receiverTimeout}).then((function(i){if(void 0!==i.status){var a=t.findIndex((function(e){return v().includes(e._event_name)}));if(a>-1){var o=t[a]._event_name,s=t[a].properties._log_count;r.Storage.setItem("_log_install_send",1),r.trackLogEvent({state:202,is_success:!1,message:o+"上报成功",event_name:o,log_count:s})}q(t.map((function(e){return e.properties._log_count})));var u=r.Storage.getItem("_event_queue",!0,[]);if(r.getStateData("isInMultilinkTest")){var c=u.findIndex((function(e){return e.params[0]._event_id===t[0]._event_id}));return void(c>-1&&(u.splice(c,1),r.Storage.setItem("_event_queue",u)))}var l=u.filter((function(e){return"toSubmit"===e.status}));r.Storage.setItem("_event_queue",l),W()}else Y(e,t,n,i.msg,i.status)})).catch((function(r){Y(e,t,n,(null==r?void 0:r.message)||r,(null==r?void 0:r.errorCode)||"timeout")}))}function Y(e,t,n,i,a){if(n>0)K(e,t,--n);else{var o=r.Storage.getItem("_event_queue",!0,[]);o.forEach((function(e){e.status="toSubmit"})),r.Storage.setItem("_event_queue",o),j({state:3,code:a,message:"事件上报失败",error_message:i,event_name:null==t?void 0:t.map((function(e){return e._event_name})).join(","),log_count:null==t?void 0:t.map((function(e){var t;return null==(t=e.properties)?void 0:t._log_count})).join(",")})}}function z(e,t,r,n){void 0===n&&(n=!0),v().includes(e)&&j({state:6,code:r,message:"web端调试时webInstall上报",is_success:n,error_message:t,event_name:e})}function J(e,t){var n;void 0===t&&(t=_.receivertRetryTimes);var i=null==(n=e[0])?void 0:n._event_name;r.HttpHelper.post(k(),e,{timeout:1e3*_.receiverTimeout}).then((function(e){z(i,e.msg,e.status)})).catch((function(r){t>0?(t--,J(e,t)):z(i,(null==r?void 0:r.message)||r,(null==r?void 0:r.errorCode)||"timeout",!1)}))}r.extend({valueToStr:C,getCurEnvEventName:L,isValueExceedLimit:P,filterCustomProperties:function(e){var t=Object.create(null);if("object"!==n(e))return r.assert(!1,440120),t;var i="",a="",o="",s="";return function(e){if("object"!==n(e))return[];var t=Object.keys(e);if("function"!==n(Reflect.ownKeys))return t;var r=Object.getOwnPropertyNames(e),i=Reflect.ownKeys(e),a=r.filter((function(e){return!t.includes(e)}));return i.filter((function(e){return!a.includes(e)}))}(e).forEach((function(r){"string"!==n(r)&&(i+=String(r)+", "),"string"!==n(r)||/^[a-z][a-z0-9_]*$/.test(r)||(a+=String(r)+", "),"string"===n(r)&&r.length>40&&(o+=String(r)+", "),["number","string","boolean","array"].includes(n(e[r]))||(s+=String(r)+", "),t[r]=e[r]})),i.length&&r.assert(!1,440605,{"{#1}":i.slice(0,i.length-2)}),a.length&&r.assert(!1,440606,{"{#1}":a.slice(0,a.length-2)}),o.length&&r.assert(!1,440607,{"{#1}":o.slice(0,o.length-2)}),s.length&&r.assert(!1,440610,{"{#1}":s.slice(0,o.length-2)}),t}}),r.extend({trackLogEvent:j});var X=void 0;function G(e){void 0===e&&(e=_.eventPollingMaxCount),clearTimeout(X),X=setTimeout((function(){--e>0&&(W(),G(e))}),1e3*_.eventPollingInterval)}r.extend({trackEvent:F,postEvent:W});var Z=!1;function ee(e,t,n){if(null==e?void 0:e.enable){if("function"!=typeof(null==t?void 0:t.init)&&n)return r.assert(!1,n);t.init(e)}}var te={prevInit:function(e){""!==e&&r.Storage.setItem("_is_prev_init",1)},init:function(e){var t,a;if(!r.Storage.getItem("_is_prev_init"))return r.assert(!1,440100);if(!i(e))return r.assert(!1,440120);if((null==(t=e.config)?void 0:t.logEnabled)&&r.infoLog("init",e),!e.appKey||!e.userId)return r.assert(!1,440101);var o={};o._appkey=e.appKey,o._tenant_id=e.userId,r.setStateData({_appkey:o._appkey}),function(){var e;_.isSass=!h.isPrivate,e=r.Storage.getItem("_setting_host",!0,{}),_.receiverDomain=_.isSass&&e.rcdm||h.receiverDomain,_.ruleDomain=_.isSass&&e.rdm||h.ruleDomain,_.isSass&&y.forEach((function(t){S(t.key,e[t.skey],t.zero)})),_.isSass&&b()}(),l()&&(r.getOpenId(e),e.config.isInApp=!1);var s=e.config||{},u=s.debugModel,c=s.logEnabled,d=s.disableRecordLog,f=s.remoteConfig,g=s.isInApp,m=s.multilinkTestConfig;function v(t){var n=Object.assign(t,o);r.init({reportData:n}),g&&"function"==typeof r.initNativeApp&&r.initNativeApp(),ee(f,r.abtest,440107),V(),Z=e,r.customEvents.$emit("isReady",e),p()&&ee(m,r.multilinkTest),G()}r.setStateData({isInMultilinkTest:(null==m?void 0:m.enable)&&(null==(a=r.multilinkTest)?void 0:a.runtime),isInApp:!!g,debugModel:!!u,logEnabled:!!c,isSendSDKLog:!d}),"promise"===n(r.sdkInitData)?r.sdkInitData.then((function(e){return v(e)})):v(r.sdkInitData)},ready:function(e){if("function"==typeof e)return Z?e.call(this,Z):void r.customEvents.$on("isReady",(function(t){return e(t)}))},use:function(e){if("function"!=typeof(null==e?void 0:e.init))return r.assert(!1,440109);if(e.env!==r.getStateData("systemEnv"))return r.assert(!1,440126);var t=r.getStateData("reportData.properties._lib_version");if(e.version!==t)return r.assert(!1,440127,{"{#1}":e.version,"{#2}":t});e.init(r)}},re={login:function(e){r.getStateData("logEnabled")&&r.infoLog("login",e),r.setStateData({"reportData._account_id":e}),r.Storage.setItem("_account_id",e)},getAccountId:function(){var e=r.getStateData("reportData");return null==e?void 0:e._account_id},logout:function(){r.setStateData({delete:!0,"reportData._account_id":""}),r.Storage.deleteItem("_account_id")}},ne={setVisitorId:function(e){r.getStateData("logEnabled")&&r.infoLog("setVisitorId",e),r.setStateData({"reportData._visitor_id":e}),r.Storage.setItem("_visitor_id",e)},getVisitorId:function(){var e=r.getStateData("reportData");return null==e?void 0:e._visitor_id}};function ie(e,t,n){if(void 0===n&&(n=!1),r.getStateData("logEnabled")&&r.infoLog("setSuperProperty",e,t),!e||!r.trimStr(e))return r.assert(!1,440106);var i,a=r.getStateData("externalReportData.superProperties");"all"===e?r.setStateData({"externalReportData.superProperties":Object.assign(a,t)}):r.setStateData(((i={delete:n})["externalReportData.superProperties."+e]=t,i));var o=r.Storage.getItem("superProperties",!0);"all"===e?r.Storage.setItem("superProperties",Object.assign(o,t)):(delete o[e],r.Storage.setItem("superProperties",o))}var ae={setSuperProperties:function(e){if(!i(e))return r.assert(!1,440120);ie("all",e)},unsetSuperProperty:function(e){ie(e,"",!0)},clearSuperProperties:function(){r.setStateData({"externalReportData.superProperties":{}}),r.Storage.deleteItem("superProperties")}},oe=["appInstall","appStart","appEnd","all"];function se(e,t){var n=r.getStateData("externalReportData");if(e===oe[oe.length-1])oe.slice(0,oe.length-1).forEach((function(e){var i,a=null===t?{}:Object.assign(n[e],t);r.setStateData(((i={})["externalReportData."+e]=a,i))}));else{var i,a=null===t?{}:Object.assign(n[e],t);r.setStateData(((i={})["externalReportData."+e]=a,i))}}var ue={setPresetEvent:function(e,t){var n,a;r.getStateData("logEnabled")&&r.infoLog("setPresetEvent",e,t);var o=Number(r.getStateData("systemEnv")),s=m[o].replace("_","");return e=null==(n=e)||null==(a=n.replace(/(mp|web)Install/,oe[0]))?void 0:a.replace(/(mp|web)Start/,oe[1]),0===o&&oe.includes("appEnd")&&oe.splice(2,1),oe.includes(e)?t?i(t)?void se(e,t):r.assert(!1,440120):void se(e,null):r.assert(!1,440122,{"{#1}":oe.map((function(e){return e.replace("app",s)})).slice(0,oe.length-1).join(",")})}};function ce(e,t){void 0===t&&(t=!0),t&&r.getStateData("logEnabled")&&r.infoLog("eventStart",e),A[e+(t?4:1)]=Date.now()}function le(e,t,n){if(void 0===t&&(t={}),void 0===n&&(n=!0),n&&r.getStateData("logEnabled")&&r.infoLog("eventFinish",e,t),!i(t))return r.assert(!1,440120);var a=n?4:1,o=e+a;if(void 0===A[o])return r.assert(!1,440604);var s=A[o],u=Date.now();F(e,{_duration:g.getTimeGap(s,u)},t,{_event_type:a})}var pe={eventStart:ce,eventFinish:le};function de(){le("_appEnd",r.getStateData("externalReportData").appEnd,!1)}function fe(t,n){void 0===n&&(n={}),r.getStateData("logEnabled")&&r.infoLog(t,n),r.NATIVE.ready((function(){var i=[e({},r.getStateData("reportData"),{_ts:Date.now(),_type:"userset",_userset_type:t,properties:{},custom_properties:n||{}})];if(0===r.getStateData("systemEnv")&&r.getStateData("debugModel"))return J(i);N("",i),W()}))}r.extend({trackAppInstall:function(){var e="_event_"+L("_appInstall");r.Storage.getItem(e)||F("_appInstall",{},r.getStateData("externalReportData").appInstall,{_event_type:1})},trackAppStart:function(){ce("_appEnd",!1),F("_appStart",{},r.getStateData("externalReportData").appStart,{_event_type:1})},trackAppEnd:de});var ge=["userDeleteByAccountId","userDeleteByVisitorId"],me=e({},te,re,ne,ae,ue,{trackAppEnd:de},pe,{track:function(e,t){if(void 0===t&&(t={}),r.getStateData("logEnabled")&&r.infoLog("track",e,t),!i(t))return r.assert(!1,440120);w((function(){F(e,{},t,{_event_type:4})}))}},{trackAdImpression:function(e){r.getStateData("logEnabled")&&r.infoLog("trackAdImpression",e);var t=I(["adNetworkPlatform","adType","adNetworkAppID","adId","mediationPlatform","ecpm","currency","rendered"],e);F("_appImp",t.properties,t.customProperties)},trackAdClick:function(e){r.getStateData("logEnabled")&&r.infoLog("trackAdClick",e);var t=I(["adNetworkPlatform","mediationPlatform","adType","adId"],e);F("_appClick",t.properties,t.customProperties)},trackIAP:function(e){r.getStateData("logEnabled")&&r.infoLog("trackIAP",e);var t=I(["orderId","payAmount","currencyType","payType","productID","productName","productCount","payStatus","failReason"],e);F("_appPur",t.properties,t.customProperties)},trackAppAttr:function(e){r.getStateData("logEnabled")&&r.infoLog("trackAppAttr",e);var t=I(["adNetwork","subChannel","adAccountID","adAccountName","adCampaignID","adCampaignName","adOfferID","adOfferName","adCreativeID","adCreativeName","attributionPlatform"],e);F("_appAttr",t.properties,t.customProperties)},trackOrder:function(e){r.getStateData("logEnabled")&&r.infoLog("trackOrder",e);var t=I(["orderId","payAmount","currencyType","payType","status"],e);F("_appOrder",t.properties,t.customProperties)},trackRegister:function(e){r.getStateData("logEnabled")&&r.infoLog("trackRegister",e);var t=I(["regType","registerStatus"],e);F("_appReg",t.properties,t.customProperties)},trackLogin:function(e){r.getStateData("logEnabled")&&r.infoLog("trackLogin",e);var t=I(["loginType","loginStatus"],e);F("_appLogin",t.properties,t.customProperties)}},{userInit:function(e){fe("userInit",e)},userUpdate:function(e){fe("userUpdate",e)},userAdd:function(e){fe("userAdd",e)},userUnset:function(e){var t={};Array.isArray(e)&&e.forEach((function(e){t[e]=""})),fe("userUnset",t)},userAppend:function(e){fe("userAppend",e)},userDelete:function(e){if(!ge.includes(e))return r.assert(!1,440117,{"{#1}":ge.join(" or ")});fe(e)}},{setChannel:function(e){r.getStateData("logEnabled")&&r.infoLog("setChannel",e),r.setStateData({"reportData.properties._channel":e})},setReferrerTitle:function(e){r.getStateData("logEnabled")&&r.infoLog("setReferrerTitle",e),r.setStateData({"reportData.properties._referrer_title":e})},listenErrorMessage:function(e){r.customEvents.$on("assertMsg",e)}}),ve=e({version:"1.1.0"},me);r.extend({NATIVE:ve});var he=r.createStorageKey,_e={setItem:function(e,t,n,i){void 0===i&&(i=!1),"object"==typeof t&&(t=JSON.stringify(t));try{localStorage.setItem(he(e),t)}catch(t){"function"==typeof n&&n(),i||r.trackLogEvent({state:4,message:"web本地存储不足",stroage_key:e})}},getItem:function(e,t,r){void 0===t&&(t=!1),void 0===r&&(r={});var n=localStorage.getItem(he(e)),i=n;if(t)try{i=JSON.parse(n)||r}catch(e){i=r}return i},deleteItem:function(e){localStorage.removeItem(he(e))},clear:function(){localStorage.clear()}};r.extend({Storage:_e});"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function ye(e,t){return e(t={exports:{}},t.exports),t.exports}var Se=ye((function(e,t){var r;r=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var r=arguments[e];for(var n in r)t[n]=r[n]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function r(n){function i(){}function a(t,r,a){if("undefined"!=typeof document){"number"==typeof(a=e({path:"/"},i.defaults,a)).expires&&(a.expires=new Date(1*new Date+864e5*a.expires)),a.expires=a.expires?a.expires.toUTCString():"";try{var o=JSON.stringify(r);/^[\{\[]/.test(o)&&(r=o)}catch(e){}r=n.write?n.write(r,t):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var u in a)a[u]&&(s+="; "+u,!0!==a[u]&&(s+="="+a[u].split(";")[0]));return document.cookie=t+"="+r+s}}function o(e,r){if("undefined"!=typeof document){for(var i={},a=document.cookie?document.cookie.split("; "):[],o=0;o<a.length;o++){var s=a[o].split("="),u=s.slice(1).join("=");r||'"'!==u.charAt(0)||(u=u.slice(1,-1));try{var c=t(s[0]);if(u=(n.read||n)(u,c)||t(u),r)try{u=JSON.parse(u)}catch(e){}if(i[c]=u,e===c)break}catch(e){}}return e?i[e]:i}}return i.set=a,i.get=function(e){return o(e,!1)},i.getJSON=function(e){return o(e,!0)},i.remove=function(t,r){a(t,"",e(r,{expires:-1}))},i.defaults={},i.withConverter=r,i}((function(){}))},e.exports=r()}));function be(e){var t=Se.get(("JSSDK_CONFIG_"+e).toLocaleUpperCase());return t&&t}function De(){return(De=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}r.extend({Cookies:{get:be,set:function(e,t,r){if(void 0===r&&(r=null),!be(e)){var n=new Date;return n.setTime(r||n.getTime()+31536e6),Se.set(("JSSDK_CONFIG_"+e).toLocaleUpperCase(),t,{domain:"",expires:n}),t}},delete:function(e){Se.remove(("JSSDK_CONFIG_"+e).toLocaleUpperCase(),{domain:""})}}});var xe=ye((function(e,t){var r;r=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}return r.m=e,r.c=t,r.p="",r(0)}([function(e,t,r){e.exports=r(1)},function(e,t,r){var n=r(2),i=r(3),a=r(4),o=r(22);function s(e){var t=new a(e),r=i(a.prototype.request,t);return n.extend(r,a.prototype,t),n.extend(r,t),r}var u=s(r(10));u.Axios=a,u.create=function(e){return s(o(u.defaults,e))},u.Cancel=r(23),u.CancelToken=r(24),u.isCancel=r(9),u.all=function(e){return Promise.all(e)},u.spread=r(25),e.exports=u,e.exports.default=u},function(e,t,r){var n=r(3),i=Object.prototype.toString;function a(e){return"[object Array]"===i.call(e)}function o(e){return void 0===e}function s(e){return null!==e&&"object"==typeof e}function u(e){if("[object Object]"!==i.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function c(e){return"[object Function]"===i.call(e)}function l(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),a(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:a,isArrayBuffer:function(e){return"[object ArrayBuffer]"===i.call(e)},isBuffer:function(e){return null!==e&&!o(e)&&null!==e.constructor&&!o(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:s,isPlainObject:u,isUndefined:o,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:c,isStream:function(e){return s(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:l,merge:function e(){var t={};function r(r,n){u(t[n])&&u(r)?t[n]=e(t[n],r):u(r)?t[n]=e({},r):a(r)?t[n]=r.slice():t[n]=r}for(var n=0,i=arguments.length;n<i;n++)l(arguments[n],r);return t},extend:function(e,t,r){return l(t,(function(t,i){e[i]=r&&"function"==typeof t?n(t,r):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},function(e,t){e.exports=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}}},function(e,t,r){var n=r(2),i=r(5),a=r(6),o=r(7),s=r(22);function u(e){this.defaults=e,this.interceptors={request:new a,response:new a}}u.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=s(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[o,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)r=r.then(t.shift(),t.shift());return r},u.prototype.getUri=function(e){return e=s(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},n.forEach(["delete","get","head","options"],(function(e){u.prototype[e]=function(t,r){return this.request(s(r||{},{method:e,url:t}))}})),n.forEach(["post","put","patch"],(function(e){u.prototype[e]=function(t,r,n){return this.request(s(n||{},{method:e,url:t,data:r}))}})),e.exports=u},function(e,t,r){var n=r(2);function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,r){if(!t)return e;var a;if(r)a=r(t);else if(n.isURLSearchParams(t))a=t.toString();else{var o=[];n.forEach(t,(function(e,t){null!=e&&(n.isArray(e)?t+="[]":e=[e],n.forEach(e,(function(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),o.push(i(t)+"="+i(e))})))})),a=o.join("&")}if(a){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}},function(e,t,r){var n=r(2);function i(){this.handlers=[]}i.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){n.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},function(e,t,r){var n=r(2),i=r(8),a=r(9),o=r(10);function s(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return s(e),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),n.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||o.adapter)(e).then((function(t){return s(e),t.data=i(t.data,t.headers,e.transformResponse),t}),(function(t){return a(t)||(s(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,r){var n=r(2);e.exports=function(e,t,r){return n.forEach(r,(function(r){e=r(e,t)})),e}},function(e,t){e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,r){var n=r(2),i=r(11),a={"Content-Type":"application/x-www-form-urlencoded"};function o(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var s,u={adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(s=r(12)),s),transformRequest:[function(e,t){return i(t,"Accept"),i(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e)?e:n.isArrayBufferView(e)?e.buffer:n.isURLSearchParams(e)?(o(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):n.isObject(e)?(o(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};n.forEach(["delete","get","head"],(function(e){u.headers[e]={}})),n.forEach(["post","put","patch"],(function(e){u.headers[e]=n.merge(a)})),e.exports=u},function(e,t,r){var n=r(2);e.exports=function(e,t){n.forEach(e,(function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])}))}},function(e,t,r){var n=r(2),i=r(13),a=r(16),o=r(5),s=r(17),u=r(20),c=r(21),l=r(14);e.exports=function(e){return new Promise((function(t,r){var p=e.data,d=e.headers;n.isFormData(p)&&delete d["Content-Type"],(n.isBlob(p)||n.isFile(p))&&p.type&&delete d["Content-Type"];var f=new XMLHttpRequest;if(e.auth){var g=e.auth.username||"",m=unescape(encodeURIComponent(e.auth.password))||"";d.Authorization="Basic "+btoa(g+":"+m)}var v=s(e.baseURL,e.url);if(f.open(e.method.toUpperCase(),o(v,e.params,e.paramsSerializer),!0),f.timeout=e.timeout,f.onreadystatechange=function(){if(f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in f?u(f.getAllResponseHeaders()):null,a={data:e.responseType&&"text"!==e.responseType?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:n,config:e,request:f};i(t,r,a),f=null}},f.onabort=function(){f&&(r(l("Request aborted",e,"ECONNABORTED",f)),f=null)},f.onerror=function(){r(l("Network Error",e,null,f)),f=null},f.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),r(l(t,e,"ECONNABORTED",f)),f=null},n.isStandardBrowserEnv()){var h=(e.withCredentials||c(v))&&e.xsrfCookieName?a.read(e.xsrfCookieName):void 0;h&&(d[e.xsrfHeaderName]=h)}if("setRequestHeader"in f&&n.forEach(d,(function(e,t){void 0===p&&"content-type"===t.toLowerCase()?delete d[t]:f.setRequestHeader(t,e)})),n.isUndefined(e.withCredentials)||(f.withCredentials=!!e.withCredentials),e.responseType)try{f.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&f.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){f&&(f.abort(),r(e),f=null)})),p||(p=null),f.send(p)}))}},function(e,t,r){var n=r(14);e.exports=function(e,t,r){var i=r.config.validateStatus;r.status&&i&&!i(r.status)?t(n("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)}},function(e,t,r){var n=r(15);e.exports=function(e,t,r,i,a){var o=new Error(e);return n(o,t,r,i,a)}},function(e,t){e.exports=function(e,t,r,n,i){return e.config=t,r&&(e.code=r),e.request=n,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,r){var n=r(2);e.exports=n.isStandardBrowserEnv()?{write:function(e,t,r,i,a,o){var s=[];s.push(e+"="+encodeURIComponent(t)),n.isNumber(r)&&s.push("expires="+new Date(r).toGMTString()),n.isString(i)&&s.push("path="+i),n.isString(a)&&s.push("domain="+a),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,r){var n=r(18),i=r(19);e.exports=function(e,t){return e&&!n(t)?i(e,t):t}},function(e,t){e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t){e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,r){var n=r(2),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,r,a,o={};return e?(n.forEach(e.split("\n"),(function(e){if(a=e.indexOf(":"),t=n.trim(e.substr(0,a)).toLowerCase(),r=n.trim(e.substr(a+1)),t){if(o[t]&&i.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([r]):o[t]?o[t]+", "+r:r}})),o):o}},function(e,t,r){var n=r(2);e.exports=n.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function i(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=i(window.location.href),function(t){var r=n.isString(t)?i(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0}},function(e,t,r){var n=r(2);e.exports=function(e,t){t=t||{};var r={},i=["url","method","data"],a=["headers","auth","proxy","params"],o=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],s=["validateStatus"];function u(e,t){return n.isPlainObject(e)&&n.isPlainObject(t)?n.merge(e,t):n.isPlainObject(t)?n.merge({},t):n.isArray(t)?t.slice():t}function c(i){n.isUndefined(t[i])?n.isUndefined(e[i])||(r[i]=u(void 0,e[i])):r[i]=u(e[i],t[i])}n.forEach(i,(function(e){n.isUndefined(t[e])||(r[e]=u(void 0,t[e]))})),n.forEach(a,c),n.forEach(o,(function(i){n.isUndefined(t[i])?n.isUndefined(e[i])||(r[i]=u(void 0,e[i])):r[i]=u(void 0,t[i])})),n.forEach(s,(function(n){n in t?r[n]=u(e[n],t[n]):n in e&&(r[n]=u(void 0,e[n]))}));var l=i.concat(a).concat(o).concat(s),p=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===l.indexOf(e)}));return n.forEach(p,c),r}},function(e,t){function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,r){var n=r(23);function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var r=this;e((function(e){r.reason||(r.reason=new n(e),t(r.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},function(e,t){e.exports=function(e){return function(t){return e.apply(null,t)}}}])},e.exports=r()})),ke=new(function(){function e(){}var t=e.prototype;return t.interceptors=function(e,t){e.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),e.interceptors.response.use((function(e){return(null==e?void 0:e.data)||{}}),(function(e){return r.assert&&r.assert(!1,440108,{"{#1}":e}),Promise.reject(e)}))},t.create=function(e){var t=De({baseURL:"",timeout:6e4,crossDomain:!0,headers:{"Content-Type":"application/json; charset=utf-8"}},e);return xe.create(t)},t.request=function(e,t){var r=this.create(t);return this.interceptors(r,e.url),r(e)},e}());r.extend({requestHandle:ke.request.bind(ke)});var we={config:{},customConfig:[]};function Oe(e,t,r){document.addEventListener?e.addEventListener(t,r,!1):e.attachEvent?e.attachEvent("on"+t,(function(){r.call(e)})):e["on"+t]=r}function Te(){var e,t,r,n="";return(null==(e=we.customConfig)||null==(t=e.filter((function(e){var t,r;return n=null==(t=Object.keys(e))?void 0:t[0],null==(r=location.href)?void 0:r.includes(n)})))||null==(r=t[0])?void 0:r[n])||{}}var Ee={trackPageView:function(e,t){var n,i;if(void 0===e&&(e=!1),void 0===t&&(t={}),!r.isObject(t))return r.assert(!1,440120);var a=Te();if(e||!we.config.autoTrackPageView||a.ignoreTrack){var o={_page_host:null==(n=location.href)?void 0:n.split("?")[0],_referrer_host:null==(i=document.referrer)?void 0:i.split("?")[0]};r.trackEvent(r.getCurEnvEventName("_appViewScreen"),o,t,{_event_type:e?2:3})}},setTrackPageView:function(e){if(r.getStateData("logEnabled")&&r.infoLog("setTrackPageView",e),!Array.isArray(e)||e.filter((function(e){return!r.isObject(e)})).length)return r.assert(!1,440116);we.customConfig=e},setAutoTrack:function(e){if(r.getStateData("logEnabled")&&r.infoLog("setAutoTrack",e),!r.isObject(e))return r.assert(!1,440120);"boolean"==typeof e.autoTrack&&(we.config.autoTrackPageView=e.autoTrack,we.config.autoTrackPageClick=e.autoTrack),"boolean"==typeof e.autoTrackPageView&&("boolean"==typeof e.autoTrack?we.config.autoTrackPageView=e.autoTrack&&e.autoTrackPageView:we.config.autoTrackPageView=e.autoTrackPageView),"boolean"==typeof e.autoTrackPageClick&&("boolean"==typeof e.autoTrack?we.config.autoTrackPageClick=e.autoTrack&&e.autoTrackPageClick:we.config.autoTrackPageClick=e.autoTrackPageClick)},trackPageClick:function(e,t){var n;if(void 0===t&&(t=!1),!e)return r.assert(!1,440102);var i=e.dataset,a=Te();if(t||!we.config.allowTrackPageClick||a.ignoreTrack||"true"===i.ignoreTrack){var o=r.stringLikeJsonToObject(null==i?void 0:i.customProperty),s={_element_id:(null==i?void 0:i.elementId)||e.id,_element_content:e.innerText,_element_type:null==(n=e.tagName)?void 0:n.toLowerCase()},u=e.getAttribute("name");u&&(s._element_name=u),e.className&&(s._element_class_name=e.className),i.elementTargetUrl?s._element_target_url=i.elementTargetUrl:"a"===s._element_type&&(s._element_target_url=e.getAttribute("href")),r.trackEvent(r.getCurEnvEventName("_appElementClick"),s,o,{_event_type:t?2:3})}}};function $e(e){r.waitToSendEvent((function(){Ee.trackPageView(!0,e)}))}function Ie(e){var t=Te();!we.config.autoTrackPageView||e||t.ignoreTrack?function(e){var t,n=location.href,i=window.history.pushState,a=window.history.replaceState;"function"===r.getType(window.history.pushState)&&(window.history.pushState=function(){i.apply(window.history,arguments),e(n),n=location.href});if("function"===r.getType(window.history.replaceState)){var o=!1;window.history.replaceState=function(){a.apply(window.history,arguments),!o&&e(n),n=location.href,o=!0}}t=window.document.documentMode?"hashchange":i?"popstate":"hashchange";Oe(window,t,(function(){e(n),n=location.href}))}((function(e){e!==location.href&&r.setStateData({"reportData.properties._referrer_name":e});var t=Te(),n=r.filterCustomProperties(t.customProperty||{});we.config.autoTrackPageView&&!t.ignoreTrack&&$e(n)})):$e(r.filterCustomProperties(t.customProperty||{}))}function Ae(e){var t,r=(null==e||null==(t=e.config)?void 0:t.autoTrackConfig)||{},n=r.autoTrack&&r.autoTrackPageView,i=r.isTrackSinglePage,a=r.autoTrack&&r.autoTrackPageClick;we.config={autoTrackPageView:n,autoTrackPageClick:a},Ie(i),Oe(document,"click",(function(e){var t,r=e||window.event;if(!r)return!1;var n=r.target||r.srcElement;if("object"!=typeof n)return!1;if("string"!=typeof n.tagName)return!1;var i=n.tagName.toLowerCase();if("body"===i||"html"===i)return!1;var a=Te();we.config.autoTrackPageClick&&!a.ignoreTrack&&"true"!==(null==(t=n.dataset)?void 0:t.ignoreTrack)&&Ee.trackPageClick(n,!0)}))}r.NATIVE=Object.assign(r.NATIVE,De({},Ee));var Ce=window||{},Pe={navigator:Ce.navigator||{},infoMap:{browser:["Safari","Chrome","Edge","IE","Firefox","Firefox Focus","Chromium","Opera","Vivaldi","Yandex","Arora","Lunascape","QupZilla","Coc Coc","Kindle","Iceweasel","Konqueror","Iceape","SeaMonkey","Epiphany","360","360SE","360EE","UC","QQBrowser","QQ","Baidu","Maxthon","Sogou","LBBROWSER","2345Explorer","TheWorld","XiaoMi","Quark","Qiyu","Wechat","WechatWork","Taobao","Alipay","Weibo","Douban","Suning","iQiYi"],os:["Windows","Linux","Mac OS","Android","Ubuntu","FreeBSD","Debian","iOS","Windows Phone","BlackBerry","MeeGo","Symbian","Chrome OS","WebOS"],device:["Mobile","Tablet","iPad"]}},Re={matchInfoMap:function(){for(var e in this.matchMap=function(){var e=Pe.navigator.userAgent||"";return{Safari:e.indexOf("Safari")>-1,Chrome:e.indexOf("Chrome")>-1||e.indexOf("CriOS")>-1,IE:e.indexOf("MSIE")>-1||e.indexOf("Trident")>-1,Edge:e.indexOf("Edge")>-1,Firefox:e.indexOf("Firefox")>-1||e.indexOf("FxiOS")>-1,"Firefox Focus":e.indexOf("Focus")>-1,Chromium:e.indexOf("Chromium")>-1,Opera:e.indexOf("Opera")>-1||e.indexOf("OPR")>-1,Vivaldi:e.indexOf("Vivaldi")>-1,Yandex:e.indexOf("YaBrowser")>-1,Arora:e.indexOf("Arora")>-1,Lunascape:e.indexOf("Lunascape")>-1,QupZilla:e.indexOf("QupZilla")>-1,"Coc Coc":e.indexOf("coc_coc_browser")>-1,Kindle:e.indexOf("Kindle")>-1||e.indexOf("Silk/")>-1,Iceweasel:e.indexOf("Iceweasel")>-1,Konqueror:e.indexOf("Konqueror")>-1,Iceape:e.indexOf("Iceape")>-1,SeaMonkey:e.indexOf("SeaMonkey")>-1,Epiphany:e.indexOf("Epiphany")>-1,360:e.indexOf("QihooBrowser")>-1||e.indexOf("QHBrowser")>-1,"360EE":e.indexOf("360EE")>-1,"360SE":e.indexOf("360SE")>-1,UC:e.indexOf("UC")>-1||e.indexOf(" UBrowser")>-1,QQBrowser:e.indexOf("QQBrowser")>-1,QQ:e.indexOf("QQ/")>-1,Baidu:e.indexOf("Baidu")>-1||e.indexOf("BIDUBrowser")>-1,Maxthon:e.indexOf("Maxthon")>-1,Sogou:e.indexOf("MetaSr")>-1||e.indexOf("Sogou")>-1,LBBROWSER:e.indexOf("LBBROWSER")>-1||e.indexOf("LieBaoFast")>-1,"2345Explorer":e.indexOf("2345Explorer")>-1,TheWorld:e.indexOf("TheWorld")>-1,XiaoMi:e.indexOf("MiuiBrowser")>-1,Quark:e.indexOf("Quark")>-1,Qiyu:e.indexOf("Qiyu")>-1,Wechat:e.indexOf("MicroMessenger")>-1,WechatWork:e.indexOf("wxwork/")>-1,Taobao:e.indexOf("AliApp(TB")>-1,Alipay:e.indexOf("AliApp(AP")>-1,Weibo:e.indexOf("Weibo")>-1,Douban:e.indexOf("com.douban.frodo")>-1,Suning:e.indexOf("SNEBUY-APP")>-1,iQiYi:e.indexOf("IqiyiApp")>-1,DingTalk:e.indexOf("DingTalk")>-1,Vivo:e.indexOf("VivoBrowser")>-1,Huawei:e.indexOf("HuaweiBrowser")>-1||e.indexOf("HUAWEI/")>-1||e.indexOf("HONOR")>-1||e.indexOf("HBPC/")>-1,Windows:e.indexOf("Windows")>-1,Linux:e.indexOf("Linux")>-1||e.indexOf("X11")>-1,"Mac OS":e.indexOf("Macintosh")>-1,Android:e.indexOf("Android")>-1||e.indexOf("Adr")>-1,Ubuntu:e.indexOf("Ubuntu")>-1,FreeBSD:e.indexOf("FreeBSD")>-1,Debian:e.indexOf("Debian")>-1,"Windows Phone":e.indexOf("IEMobile")>-1||e.indexOf("Windows Phone")>-1,BlackBerry:e.indexOf("BlackBerry")>-1||e.indexOf("RIM")>-1,MeeGo:e.indexOf("MeeGo")>-1,Symbian:e.indexOf("Symbian")>-1,iOS:e.indexOf("like Mac OS X")>-1,"Chrome OS":e.indexOf("CrOS")>-1,WebOS:e.indexOf("hpwOS")>-1,Mobile:e.indexOf("Mobi")>-1||e.indexOf("iPh")>-1||e.indexOf("480")>-1,Tablet:e.indexOf("Tablet")>-1||e.indexOf("Nexus 7")>-1,iPad:e.indexOf("iPad")>-1}}(),Pe.infoMap)for(var t=0;t<Pe.infoMap[e].length;t++){var r=Pe.infoMap[e][t];this.matchMap[r]&&(this[e]=r)}},getOS:function(){return this.os},getOSVersion:function(){var e=this,t=Pe.navigator.userAgent||"";e.osVersion="";var r={Windows:function(){var e=t.replace(/^.*Windows NT ([\d.]+);.*$/,"$1");return{10:"10 || 11",6.3:"8.1",6.2:"8",6.1:"7","6.0":"Vista",5.2:"XP 64-Bit",5.1:"XP","5.0":"2000","4.0":"NT 4.0","3.5.1":"NT 3.5.1",3.5:"NT 3.5",3.1:"NT 3.1"}[e]||e},Android:function(){return t.replace(/^.*Android ([\d.]+);.*$/,"$1")},iOS:function(){return t.replace(/^.*OS ([\d_|\.]+) like.*$/,"$1").replace(/_/g,".")},Debian:function(){return t.replace(/^.*Debian\/([\d.]+).*$/,"$1")},"Windows Phone":function(){return t.replace(/^.*Windows Phone( OS)? ([\d.]+);.*$/,"$2")},"Mac OS":function(){return t.replace(/^.*Mac OS X ([\d_|\.]+).*$/,"$1").replace(/_/g,".")},WebOS:function(){return t.replace(/^.*hpwOS\/([\d.]+);.*$/,"$1")}};return r[e.os]&&(e.osVersion=r[e.os](),e.osVersion===t&&(e.osVersion="")),e.osVersion},getDeviceType:function(){return this.device||"PC"},getLanguage:function(){var e=Pe.navigator.browserLanguage||Pe.navigator.language||"";if(e){var t=e.split("-");if(t[1])return t[1]=t[1].toUpperCase(),t.join("_")}return""},getBrowserInfo:function(){var e=this,t=Pe.navigator.userAgent||"",r=e.matchMap,n=!1;if(Ce.chrome){var i=t.replace(/^.*Chrome\/([\d]+).*$/,"$1");i>36&&Ce.showModalDialog?n=!0:i>45&&(n=function(e,t){var r=Pe.navigator.mimeTypes;if(!r)return!1;for(var n in r){var i;if((null==(i=r[n])?void 0:i[e])===t)return!0}return!1}("type","application/vnd.chromium.remoting-viewer"))}if(r.Baidu&&r.Opera&&(r.Baidu=!1),r.Mobile&&(r.Mobile=!(t.indexOf("iPad")>-1)),n&&(r["360SE"]=!0),r.IE||r.Edge)switch(Ce.screenTop-Ce.screenY){case 102:r["360EE"]=!0;break;case 104:r["360SE"]=!0}var a,o={Safari:function(){return t.replace(/^.*Version\/([\d.]+).*$/,"$1")},Chrome:function(){return t.replace(/^.*Chrome\/([\d.]+).*$/,"$1").replace(/^.*CriOS\/([\d.]+).*$/,"$1")},IE:function(){return t.replace(/^.*MSIE ([\d.]+).*$/,"$1").replace(/^.*rv:([\d.]+).*$/,"$1")},Edge:function(){return t.replace(/^.*Edge\/([\d.]+).*$/,"$1")},Firefox:function(){return t.replace(/^.*Firefox\/([\d.]+).*$/,"$1").replace(/^.*FxiOS\/([\d.]+).*$/,"$1")},"Firefox Focus":function(){return t.replace(/^.*Focus\/([\d.]+).*$/,"$1")},Chromium:function(){return t.replace(/^.*Chromium\/([\d.]+).*$/,"$1")},Opera:function(){return t.replace(/^.*Opera\/([\d.]+).*$/,"$1").replace(/^.*OPR\/([\d.]+).*$/,"$1")},Vivaldi:function(){return t.replace(/^.*Vivaldi\/([\d.]+).*$/,"$1")},Yandex:function(){return t.replace(/^.*YaBrowser\/([\d.]+).*$/,"$1")},Arora:function(){return t.replace(/^.*Arora\/([\d.]+).*$/,"$1")},Lunascape:function(){return t.replace(/^.*Lunascape[\/\s]([\d.]+).*$/,"$1")},QupZilla:function(){return t.replace(/^.*QupZilla[\/\s]([\d.]+).*$/,"$1")},"Coc Coc":function(){return t.replace(/^.*coc_coc_browser\/([\d.]+).*$/,"$1")},Kindle:function(){return t.replace(/^.*Version\/([\d.]+).*$/,"$1")},Iceweasel:function(){return t.replace(/^.*Iceweasel\/([\d.]+).*$/,"$1")},Konqueror:function(){return t.replace(/^.*Konqueror\/([\d.]+).*$/,"$1")},Iceape:function(){return t.replace(/^.*Iceape\/([\d.]+).*$/,"$1")},SeaMonkey:function(){return t.replace(/^.*SeaMonkey\/([\d.]+).*$/,"$1")},Epiphany:function(){return t.replace(/^.*Epiphany\/([\d.]+).*$/,"$1")},360:function(){return t.replace(/^.*QihooBrowser\/([\d.]+).*$/,"$1")},"360SE":function(){var e=t.replace(/^.*Chrome\/([\d]+).*$/,"$1");return{63:"10.0",55:"9.1",45:"8.1",42:"8.0",31:"7.0",21:"6.3"}[e]||e},"360EE":function(){var e=t.replace(/^.*Chrome\/([\d]+).*$/,"$1");return{69:"11.0",63:"9.5",55:"9.0",50:"8.7",30:"7.5"}[e]||e},Maxthon:function(){return t.replace(/^.*Maxthon\/([\d.]+).*$/,"$1")},QQBrowser:function(){return t.replace(/^.*QQBrowser\/([\d.]+).*$/,"$1")},QQ:function(){return t.replace(/^.*QQ\/([\d.]+).*$/,"$1")},Baidu:function(){return t.replace(/^.*BIDUBrowser[\s\/]([\d.]+).*$/,"$1")},UC:function(){return t.replace(/^.*UC?Browser\/([\d.]+).*$/,"$1")},Sogou:function(){return t.replace(/^.*SE ([\d.X]+).*$/,"$1").replace(/^.*SogouMobileBrowser\/([\d.]+).*$/,"$1")},Liebao:function(){var e="";t.indexOf("LieBaoFast")>-1&&(e=t.replace(/^.*LieBaoFast\/([\d.]+).*$/,"$1"));var r=t.replace(/^.*Chrome\/([\d]+).*$/,"$1");return e||{57:"6.5",49:"6.0",46:"5.9",42:"5.3",39:"5.2",34:"5.0",29:"4.5",21:"4.0"}[r]||r},LBBROWSER:function(){var e="";t.indexOf("LieBaoFast")>-1&&(e=t.replace(/^.*LieBaoFast\/([\d.]+).*$/,"$1"));var r=t.replace(/^.*Chrome\/([\d]+).*$/,"$1");return e||{57:"6.5",49:"6.0",46:"5.9",42:"5.3",39:"5.2",34:"5.0",29:"4.5",21:"4.0"}[r]||r},"2345Explorer":function(){return t.replace(/^.*2345Explorer\/([\d.]+).*$/,"$1")},"115Browser":function(){return t.replace(/^.*115Browser\/([\d.]+).*$/,"$1")},TheWorld:function(){return t.replace(/^.*TheWorld ([\d.]+).*$/,"$1")},XiaoMi:function(){return t.replace(/^.*MiuiBrowser\/([\d.]+).*$/,"$1")},Vivo:function(){return t.replace(/^.*VivoBrowser\/([\d.]+).*$/,"$1")},Quark:function(){return t.replace(/^.*Quark\/([\d.]+).*$/,"$1")},Qiyu:function(){return t.replace(/^.*Qiyu\/([\d.]+).*$/,"$1")},Wechat:function(){return t.replace(/^.*MicroMessenger\/([\d.]+).*$/,"$1")},WechatWork:function(){return t.replace(/^.*wxwork\/([\d.]+).*$/,"$1")},Taobao:function(){return t.replace(/^.*AliApp\(TB\/([\d.]+).*$/,"$1")},Alipay:function(){return t.replace(/^.*AliApp\(AP\/([\d.]+).*$/,"$1")},Weibo:function(){return t.replace(/^.*weibo__([\d.]+).*$/,"$1")},Douban:function(){return t.replace(/^.*com.douban.frodo\/([\d.]+).*$/,"$1")},Suning:function(){return t.replace(/^.*SNEBUY-APP([\d.]+).*$/,"$1")},iQiYi:function(){return t.replace(/^.*IqiyiVersion\/([\d.]+).*$/,"$1")},DingTalk:function(){return t.replace(/^.*DingTalk\/([\d.]+).*$/,"$1")},Huawei:function(){return t.replace(/^.*Version\/([\d.]+).*$/,"$1").replace(/^.*HuaweiBrowser\/([\d.]+).*$/,"$1").replace(/^.*HBPC\/([\d.]+).*$/,"$1")}};(e.browserVersion="",o[e.browser]&&(e.browserVersion=o[e.browser](),e.browserVersion===t&&(e.browserVersion="")),"Chrome"===e.browser&&t.match(/\S+Browser/))&&(e.browser=null==(a=t.match(/\S+Browser/))?void 0:a[0],e.version=t.replace(/^.*Browser\/([\d.]+).*$/,"$1"));return{browser:e.browser,browserVersion:e.browserVersion}},getScreenSize:function(){var e,t,r,n,i,a;return{width:(null==(e=Ce.screen)?void 0:e.width)||Ce.innerWidth||(null==(t=document)||null==(r=t.body)?void 0:r.clientWidth)||0,height:(null==(n=Ce.screen)?void 0:n.height)||Ce.innerHeight||(null==(i=document)||null==(a=i.body)?void 0:a.clientHeight)||0}}};Re.matchInfoMap();var Me={deviceType:Re.getDeviceType(),os:Re.getOS(),osVersion:Re.getOSVersion(),language:Re.getLanguage(),browserInfo:Re.getBrowserInfo(),screenSize:Re.getScreenSize()};function Ne(e){var t={1:"Mobile"===e.deviceType&&"Android"===e.os,2:"Tablet"===e.deviceType&&"Android"===e.os,3:"Mobile"===e.deviceType&&"iOS"===e.os,4:"iPad"===e.deviceType,5:"Mac OS"===e.os,6:"Windows"===e.os};return+Object.keys(t).filter((function(e){return t[e]}))[0]||0}var Le,je=["_build_id","_tenant_id","_appkey","_account_id","_visitor_id","_session_id","_idfa","_idfv","_uuid","_imei","_imei2","_gaid","_oaid","_android_id","_package_type","_out","_upt","_distinct_id","_distinct_id_type"],Be=["_language","_time_zone","_manufacturer","_platform","_os_version","_screen_width","_screen_height","_density","_device_model","_device_name","_device_type","_network_type","_app_version","_app_version_code","_package_name","_app_name","_channel","_lib","_lib_version"],Ue="";function qe(e){var t={};try{t=JSON.parse(e)}catch(e){t={}}if(r.trackLogEvent({message:"app回调js",state:12,callbackData:e,callbackName:Ue}),r.isObject(t)){if(r.isObject(t.properties)){var n=r.getStateData("appData.properties");r.setStateData({"appData.properties":Object.assign(n,Ve(Be,t.properties))}),delete t.properties}var i=r.getStateData("appData.outlayerData");r.setStateData({"appData.outlayerData":Object.assign(i,Ve(je,t))})}}function Ve(e,t){var r={};return e.forEach((function(e){t.hasOwnProperty(e)&&(r[e]=t[e])})),r}return r.extend({sdkInitData:(Le={},Le._ua=navigator.userAgent,Le.properties=function(){var e,t;return{_browser:Me.browserInfo.browser,_browser_version:Me.browserInfo.browserVersion,_device_model:(null==(e=window)||null==(t=e.navigator)?void 0:t.platform)||"",_device_type:Ne(Me),_os_version:Me.osVersion,_screen_height:Me.screenSize.height,_screen_width:Me.screenSize.width,_platform:5,_language:Me.language}}(),Le.properties._lib=3,Le.properties._page_title=document.title,Le.properties._page_name=location.href,Le.properties._referrer_name=document.referrer,Le),initNativeApp:function(){var e,t="sesdk://interface/getSEAppData?funcName="+(Ue="jssdk"+ +new Date);window[Ue]=qe,"iOS"===Me.os?function(e){var t=document.createElement("iframe");t.setAttribute("src",e),t.setAttribute("style","display:none;"),t.setAttribute("height","0px"),t.setAttribute("width","0px"),t.setAttribute("frameborder","0"),document.body.appendChild(t),t.parentNode.removeChild(t),t=null}(t):null==(e=window.SE_APP_JS_Bridge)||null==e.getSEAppData||e.getSEAppData(t),r.trackLogEvent({message:"js请求App",state:11,callbackName:Ue})}}),r.NATIVE.ready((function(e){var t;(null==(t=e.config)?void 0:t.isInApp)||r.waitToSendEvent((function(){r.trackAppInstall(),r.trackAppStart()})),Ae(e)})),r.NATIVE}));
